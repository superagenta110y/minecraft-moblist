<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minecraft Encyclopedia</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;500;600&display=swap');

  :root {
    --bg-dark: #0d0d0d;
    --bg-card: #1a1a1a;
    --bg-card-hover: #222222;
    --bg-modal: #111111;
    --border-stone: #3a3a3a;
    --border-highlight: #4a4a4a;
    --accent: #4caf50;
    --accent-dark: #2e7d32;
    --green: #4caf50;
    --green-light: #6fcf73;
    --green-dark: #2e7d32;
    --red: #e53935;
    --yellow: #ffc107;
    --blue: #2196f3;
    --purple: #9c27b0;
    --orange: #ff9800;
    --text-primary: #e0e0e0;
    --text-secondary: #9e9e9e;
    --text-dim: #616161;
    --passive: #4caf50;
    --neutral: #ffc107;
    --hostile: #e53935;
    --boss: #9c27b0;
    --transition-speed: 0.6s;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  html { scroll-behavior: smooth; height: 100%; overflow-y: scroll; }

  body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-dark);
    color: var(--text-primary);
    min-height: 100%;
    overflow-y: auto;
    background-image: radial-gradient(ellipse at top, #0a1a0a 0%, var(--bg-dark) 60%);
    transition: background-color var(--transition-speed) ease, background-image var(--transition-speed) ease;
  }

  /* â”€â”€ HEADER â”€â”€ */
  header {
    background: linear-gradient(180deg, #0a0a0a 0%, #111 100%);
    border-bottom: 3px solid var(--accent-dark);
    padding: 20px 20px 0;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 24px rgba(0,0,0,0.8);
    transition: border-color var(--transition-speed) ease;
  }

  header h1 {
    font-size: clamp(11px, 2.5vw, 22px);
    color: var(--accent);
    text-shadow: 0 0 20px rgba(76,175,80,0.5), 3px 3px 0 #000;
    letter-spacing: 2px;
    margin-bottom: 4px;
    transition: color var(--transition-speed) ease;
  }

  header p.subtitle {
    font-size: 7px;
    color: var(--text-dim);
    letter-spacing: 2px;
    margin-bottom: 12px;
  }

  /* â”€â”€ TAB NAV â”€â”€ */
  .tab-nav {
    display: flex;
    justify-content: center;
    gap: 4px;
    padding: 8px 20px 0;
    border-bottom: 2px solid var(--border-stone);
  }

  .tab-btn {
    font-family: 'Press Start 2P', monospace;
    font-size: 8px;
    padding: 10px 18px;
    background: none;
    border: 2px solid var(--border-stone);
    border-bottom: none;
    color: var(--text-dim);
    cursor: pointer;
    letter-spacing: 1px;
    border-radius: 2px 2px 0 0;
    transition: all 0.15s;
    position: relative;
    bottom: -2px;
  }

  .tab-btn:hover { color: var(--text-primary); border-color: var(--border-highlight); }
  .tab-btn.active {
    color: var(--accent);
    border-color: var(--accent);
    background: rgba(76,175,80,0.05);
    text-shadow: 0 0 8px var(--accent);
    transition: color var(--transition-speed) ease, border-color var(--transition-speed) ease;
  }

  /* â”€â”€ CONTROLS â”€â”€ */
  .controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    justify-content: center;
    align-items: center;
    max-width: 900px;
    margin: 12px auto 0;
    padding: 0 0 12px;
  }

  .search-wrapper { position: relative; flex: 1 1 220px; max-width: 340px; }
  .search-wrapper::before {
    content: 'ğŸ”';
    position: absolute; left: 10px; top: 50%; transform: translateY(-50%); font-size: 14px;
  }

  .search-input {
    width: 100%;
    padding: 10px 12px 10px 34px;
    background: #1a1a1a;
    border: 2px solid var(--border-stone);
    border-radius: 2px;
    color: var(--text-primary);
    font-family: 'Press Start 2P', monospace;
    font-size: 8px;
    outline: none;
    transition: border-color 0.2s;
  }

  .search-input:focus { border-color: var(--accent); }
  .search-input::placeholder { color: var(--text-dim); }

  .filter-buttons { display: flex; flex-wrap: wrap; gap: 6px; justify-content: center; }

  .filter-btn {
    padding: 7px 11px;
    font-family: 'Press Start 2P', monospace;
    font-size: 7px;
    border: 2px solid transparent;
    border-radius: 2px;
    cursor: pointer;
    transition: all 0.15s;
    background: #1a1a1a;
    color: var(--text-secondary);
    letter-spacing: 1px;
  }

  .filter-btn:hover { transform: translateY(-1px); filter: brightness(1.3); }
  .filter-btn[data-filter="all"] { border-color: var(--border-highlight); }
  .filter-btn[data-filter="all"].active { background: #333; border-color: #999; color: #fff; }
  /* mob filters */
  .filter-btn[data-filter="passive"] { border-color: var(--passive); }
  .filter-btn[data-filter="passive"].active { background: #1b3a1c; border-color: var(--passive); color: var(--passive); text-shadow: 0 0 8px var(--passive); }
  .filter-btn[data-filter="neutral"] { border-color: var(--neutral); }
  .filter-btn[data-filter="neutral"].active { background: #3a2e00; border-color: var(--neutral); color: var(--neutral); text-shadow: 0 0 8px var(--neutral); }
  .filter-btn[data-filter="hostile"] { border-color: var(--hostile); }
  .filter-btn[data-filter="hostile"].active { background: #3a0a0a; border-color: var(--hostile); color: var(--hostile); text-shadow: 0 0 8px var(--hostile); }
  .filter-btn[data-filter="boss"] { border-color: var(--boss); }
  .filter-btn[data-filter="boss"].active { background: #2a0a3a; border-color: var(--boss); color: var(--boss); text-shadow: 0 0 8px var(--boss); }
  /* item filters */
  .filter-btn[data-filter="material"] { border-color: var(--yellow); }
  .filter-btn[data-filter="material"].active { background: #3a2a00; border-color: var(--yellow); color: var(--yellow); }
  .filter-btn[data-filter="food"] { border-color: var(--green); }
  .filter-btn[data-filter="food"].active { background: #1b3a1c; border-color: var(--green); color: var(--green); }
  .filter-btn[data-filter="combat"] { border-color: var(--red); }
  .filter-btn[data-filter="combat"].active { background: #3a0a0a; border-color: var(--red); color: var(--red); }
  .filter-btn[data-filter="rare"] { border-color: var(--purple); }
  .filter-btn[data-filter="rare"].active { background: #2a0a3a; border-color: var(--purple); color: var(--purple); }
  /* location filters */
  .filter-btn[data-filter="overworld"] { border-color: var(--green); }
  .filter-btn[data-filter="overworld"].active { background: #1b3a1c; border-color: var(--green); color: var(--green); }
  .filter-btn[data-filter="nether"] { border-color: var(--red); }
  .filter-btn[data-filter="nether"].active { background: #3a0a0a; border-color: var(--red); color: var(--red); }
  .filter-btn[data-filter="end"] { border-color: var(--purple); }
  .filter-btn[data-filter="end"].active { background: #2a0a3a; border-color: var(--purple); color: var(--purple); }

  /* â”€â”€ STATS BAR â”€â”€ */
  .stats-bar {
    text-align: center;
    font-size: 7px;
    color: var(--text-dim);
    padding: 8px 20px 0;
    letter-spacing: 1px;
  }

  /* â”€â”€ TAB PANES â”€â”€ */
  .tab-pane { display: none; }
  .tab-pane.active { display: block; }

  /* â”€â”€ GRID â”€â”€ */
  .grid-container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px 16px 80px;
  }

  .entity-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 12px;
  }

  /* â”€â”€ CARD â”€â”€ */
  .entity-card {
    background: var(--bg-card);
    border: 2px solid var(--border-stone);
    border-radius: 2px;
    padding: 14px 10px 12px;
    cursor: pointer;
    text-align: center;
    transition: transform 0.12s, border-color 0.12s, background 0.12s, box-shadow 0.12s;
    position: relative;
    overflow: hidden;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 8px;
  }

  .entity-card::before {
    content: '';
    position: absolute; inset: 0;
    background: linear-gradient(135deg, rgba(255,255,255,0.03) 0%, transparent 60%);
    pointer-events: none;
  }

  .entity-card:hover {
    transform: translateY(-3px) scale(1.02);
    background: var(--bg-card-hover);
    box-shadow: 0 8px 24px rgba(0,0,0,0.6);
  }

  .entity-card.hidden { display: none; }

  .mob-card[data-cat="passive"]:hover { border-color: var(--passive); box-shadow: 0 8px 24px rgba(76,175,80,0.25); }
  .mob-card[data-cat="neutral"]:hover  { border-color: var(--neutral); box-shadow: 0 8px 24px rgba(255,193,7,0.25); }
  .mob-card[data-cat="hostile"]:hover  { border-color: var(--hostile); box-shadow: 0 8px 24px rgba(229,57,53,0.25); }
  .mob-card[data-cat="boss"]:hover     { border-color: var(--boss); box-shadow: 0 8px 24px rgba(156,39,176,0.35); }
  .item-card:hover { border-color: var(--yellow); box-shadow: 0 8px 24px rgba(255,193,7,0.2); }
  .location-card:hover { border-color: var(--accent); box-shadow: 0 8px 24px rgba(76,175,80,0.25); }

  .cat-dot {
    position: absolute; top: 8px; right: 8px;
    width: 7px; height: 7px; border-radius: 0; image-rendering: pixelated;
  }

  .mob-card[data-cat="passive"] .cat-dot { background: var(--passive); }
  .mob-card[data-cat="neutral"] .cat-dot { background: var(--neutral); }
  .mob-card[data-cat="hostile"] .cat-dot { background: var(--hostile); }
  .mob-card[data-cat="boss"]    .cat-dot { background: var(--boss); box-shadow: 0 0 8px var(--boss); }

  .entity-img-wrap {
    width: 100px; height: 100px;
    display: flex; align-items: center; justify-content: center;
    image-rendering: pixelated;
  }

  .entity-img-wrap img {
    max-width: 100%; max-height: 100%;
    object-fit: contain; image-rendering: pixelated;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.8));
    transition: transform 0.2s;
  }

  .entity-card:hover .entity-img-wrap img { transform: scale(1.1); }
  .entity-emoji-fallback { font-size: 52px; line-height: 1; }
  .entity-name { font-size: 12px; font-family: 'Inter', sans-serif; font-weight: 600; color: var(--text-primary); letter-spacing: 0.3px; line-height: 1.4; text-align: center; word-break: break-word; }

  /* Location card extras */
  .location-emoji { font-size: 36px; line-height: 1; }
  .location-dim-badge {
    font-size: 6px; padding: 2px 6px;
    border-radius: 2px; border: 1px solid;
    letter-spacing: 1px; text-transform: uppercase;
  }
  .dim-overworld { color: var(--green); border-color: var(--green); background: rgba(76,175,80,0.1); }
  .dim-nether { color: var(--red); border-color: var(--red); background: rgba(229,57,53,0.1); }
  .dim-end { color: var(--purple); border-color: var(--purple); background: rgba(156,39,176,0.1); }

  /* â”€â”€ NO RESULTS â”€â”€ */
  .no-results {
    grid-column: 1 / -1; text-align: center; padding: 60px 20px;
    color: var(--text-dim); font-size: 9px; display: none;
  }

  /* â”€â”€ MODAL â”€â”€ */
  .modal-overlay {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.92);
    z-index: 99999;
    display: flex; align-items: center; justify-content: center;
    padding: 16px;
    opacity: 0; visibility: hidden;
    transition: opacity 0.2s, visibility 0.2s;
    backdrop-filter: blur(6px);
    overflow-y: auto;
  }

  .modal-overlay.open { opacity: 1; visibility: visible; }

  .modal {
    background: var(--bg-modal);
    border: 3px solid var(--border-stone);
    border-radius: 2px;
    max-width: 860px; width: 100%;
    max-height: 92vh; overflow-y: auto;
    position: relative;
    transform: scale(0.92) translateY(20px);
    transition: transform 0.22s cubic-bezier(0.34,1.56,0.64,1);
    scrollbar-width: thin; scrollbar-color: var(--border-stone) transparent;
    margin: auto;
  }

  .modal-overlay.open .modal { transform: scale(1) translateY(0); }

  .modal-header {
    display: flex; align-items: center; gap: 16px;
    padding: 20px 20px 16px;
    border-bottom: 2px solid var(--border-stone);
    position: relative;
  }

  .modal-entity-img {
    width: 140px; height: 140px;
    display: flex; align-items: center; justify-content: center; flex-shrink: 0;
  }

  .modal-entity-img.item-focus {
    width: 220px; height: 220px;
    perspective: 900px;
  }

  .item-3d-stage {
    width: 160px; height: 160px;
    position: relative;
    transform-style: preserve-3d;
    animation: itemSpin 14s linear infinite;
  }

  .item-3d-face {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 1px solid rgba(255,255,255,0.08);
    background: rgba(0,0,0,0.15);
    image-rendering: pixelated;
    overflow: hidden;
  }

  .item-3d-face img {
    width: 120px;
    height: 120px;
    object-fit: contain;
    image-rendering: pixelated;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.9));
  }

  .item-3d-face.front { transform: translateZ(16px); }
  .item-3d-face.back { transform: rotateY(180deg) translateZ(16px); }
  .item-3d-face.right { transform: rotateY(90deg) translateZ(16px); }
  .item-3d-face.left { transform: rotateY(-90deg) translateZ(16px); }
  .item-3d-face.top { transform: rotateX(90deg) translateZ(16px); }
  .item-3d-face.bottom { transform: rotateX(-90deg) translateZ(16px); }

  @keyframes itemSpin {
    0% { transform: rotateX(-10deg) rotateY(0deg); }
    100% { transform: rotateX(-10deg) rotateY(360deg); }
  }

  .modal-entity-img img {
    max-width: 100%; max-height: 100%;
    object-fit: contain; image-rendering: pixelated;
    filter: drop-shadow(0 2px 6px rgba(0,0,0,0.9));
  }

  .modal-entity-emoji { font-size: 90px; line-height: 1; }
  .modal-title-block { flex: 1; }

  .modal-name { font-family: 'Press Start 2P', monospace; font-size: clamp(14px,2.5vw,22px); color: var(--text-primary); margin-bottom: 10px; text-shadow: 2px 2px 0 #000; }

  .cat-badge {
    display: inline-block; padding: 5px 10px;
    font-size: 10px; font-family: 'Press Start 2P', monospace; border-radius: 2px; border: 1px solid; letter-spacing: 1px;
  }

  .cat-badge.passive { color: var(--passive); border-color: var(--passive); background: rgba(76,175,80,0.1); }
  .cat-badge.neutral { color: var(--neutral); border-color: var(--neutral); background: rgba(255,193,7,0.1); }
  .cat-badge.hostile { color: var(--hostile); border-color: var(--hostile); background: rgba(229,57,53,0.1); }
  .cat-badge.boss    { color: var(--boss); border-color: var(--boss); background: rgba(156,39,176,0.15); }
  .cat-badge.material { color: var(--yellow); border-color: var(--yellow); background: rgba(255,193,7,0.1); }
  .cat-badge.food    { color: var(--green); border-color: var(--green); background: rgba(76,175,80,0.1); }
  .cat-badge.combat  { color: var(--red); border-color: var(--red); background: rgba(229,57,53,0.1); }
  .cat-badge.rare    { color: var(--purple); border-color: var(--purple); background: rgba(156,39,176,0.1); }
  .cat-badge.overworld { color: var(--green); border-color: var(--green); background: rgba(76,175,80,0.1); }
  .cat-badge.nether  { color: var(--red); border-color: var(--red); background: rgba(229,57,53,0.1); }
  .cat-badge.end     { color: var(--purple); border-color: var(--purple); background: rgba(156,39,176,0.1); }

  .modal-close {
    position: absolute; top: 14px; right: 14px;
    background: none; border: 2px solid var(--border-stone);
    color: var(--text-secondary);
    font-family: 'Press Start 2P', monospace;
    font-size: 10px; cursor: pointer;
    padding: 6px 10px; border-radius: 2px;
    transition: all 0.15s; line-height: 1;
  }

  .modal-close:hover { border-color: var(--hostile); color: var(--hostile); }

  .modal-back {
    position: absolute; top: 14px; left: 14px;
    background: none; border: 2px solid var(--border-stone);
    color: var(--text-secondary);
    font-family: 'Press Start 2P', monospace;
    font-size: 10px; cursor: pointer;
    padding: 6px 10px; border-radius: 2px;
    transition: all 0.15s; line-height: 1;
    display: none;
  }

  .modal-back:hover { border-color: var(--accent); color: var(--accent); }
  .modal-back.visible { display: block; }

  .modal-body { padding: 20px; }

  .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 18px; }
  .stat-block { background: #1a1a1a; border: 1px solid var(--border-stone); border-radius: 2px; padding: 10px 12px; }
  .stat-label { font-size: 10px; font-family: 'Press Start 2P', monospace; color: var(--text-dim); letter-spacing: 1px; margin-bottom: 8px; text-transform: uppercase; }
  .stat-value { font-size: 14px; font-family: 'Inter', sans-serif; color: var(--text-primary); line-height: 1.7; }

  .hp-bar-wrap { margin-top: 6px; height: 6px; background: #2a2a2a; border-radius: 0; overflow: hidden; }
  .hp-bar { height: 100%; background: linear-gradient(90deg, var(--green-dark), var(--green)); }

  .section-title {
    font-size: 11px; font-family: 'Press Start 2P', monospace; color: var(--accent); margin: 20px 0 10px;
    letter-spacing: 1px; border-left: 3px solid var(--accent);
    padding-left: 8px; transition: color var(--transition-speed), border-color var(--transition-speed);
  }

  .section-text { font-size: 14px; font-family: 'Inter', sans-serif; color: var(--text-secondary); line-height: 1.8; }

  .chip-list { display: flex; flex-wrap: wrap; gap: 6px; margin-top: 4px; }

  .chip {
    background: #1e1e1e; border: 1px solid var(--border-stone);
    border-radius: 4px; padding: 8px 14px;
    font-size: 13px; color: var(--yellow); letter-spacing: 0.3px;
    cursor: default; transition: all 0.15s;
    font-family: 'Inter', sans-serif; font-weight: 500;
    line-height: 1.3;
  }

  .chip.clickable {
    cursor: pointer; border-color: rgba(255,193,7,0.4);
  }

  .chip.clickable:hover { border-color: var(--yellow); background: rgba(255,193,7,0.08); transform: translateY(-1px); }

  .chip.spawn-chip {
    color: var(--blue); border-color: rgba(33,150,243,0.4);
    cursor: pointer;
  }

  .chip.spawn-chip:hover { border-color: var(--blue); background: rgba(33,150,243,0.08); transform: translateY(-1px); }

  .chip.mob-chip {
    color: var(--red); border-color: rgba(229,57,53,0.3);
    cursor: pointer;
  }

  .chip.mob-chip:hover { border-color: var(--red); background: rgba(229,57,53,0.08); transform: translateY(-1px); }

  .chip.resource-chip {
    color: var(--green); border-color: rgba(76,175,80,0.3);
    cursor: pointer;
  }

  .chip.resource-chip:hover { border-color: var(--green); background: rgba(76,175,80,0.08); transform: translateY(-1px); }

  .chip.ingredient-chip {
    color: var(--orange); border-color: rgba(255,152,0,0.4);
    cursor: pointer;
  }

  .chip.ingredient-chip:hover { border-color: var(--orange); background: rgba(255,152,0,0.08); transform: translateY(-1px); }

  /* Mob thumbnails in item modal */
  .mob-thumb-list { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 8px; }
  .mob-thumb {
    display: flex; flex-direction: column; align-items: center; gap: 4px;
    cursor: pointer; transition: transform 0.15s;
  }
  .mob-thumb:hover { transform: translateY(-2px); }
  .mob-thumb img, .mob-thumb .mob-thumb-emoji {
    width: 64px; height: 64px; object-fit: contain; image-rendering: pixelated;
    filter: drop-shadow(0 1px 3px rgba(0,0,0,0.8));
  }
  .mob-thumb .mob-thumb-emoji { font-size: 44px; line-height: 64px; text-align: center; }
  .mob-thumb-name { font-size: 12px; font-family: 'Inter', sans-serif; font-weight: 500; color: var(--text-secondary); max-width: 80px; text-align: center; line-height: 1.4; }

  /* Scrollbar */
  .modal::-webkit-scrollbar { width: 6px; }
  .modal::-webkit-scrollbar-track { background: transparent; }
  .modal::-webkit-scrollbar-thumb { background: var(--border-stone); border-radius: 2px; }

  /* â”€â”€ HUD BANNER â”€â”€ */
  #locationHud {
    position: fixed; bottom: 0; left: 0; right: 0;
    z-index: 200;
    background: rgba(0,0,0,0.85);
    border-top: 2px solid var(--accent);
    padding: 10px 20px;
    display: none;
    align-items: center; justify-content: center;
    gap: 16px;
    backdrop-filter: blur(8px);
    transition: border-color var(--transition-speed) ease;
  }

  #locationHud.visible { display: flex; }

  #locationHud .hud-text { font-size: 9px; color: var(--text-primary); letter-spacing: 1px; }

  #locationHudExit {
    font-family: 'Press Start 2P', monospace;
    font-size: 7px; padding: 6px 12px;
    background: none; border: 2px solid var(--hostile);
    color: var(--hostile); cursor: pointer; border-radius: 2px;
    transition: all 0.15s; letter-spacing: 1px;
  }

  #locationHudExit:hover { background: rgba(229,57,53,0.15); }

  /* â”€â”€ COLOR CUSTOMIZER â”€â”€ */
  #colorCustomizer {
    position: fixed; bottom: 20px; right: 20px;
    z-index: 300;
  }

  #colorToggle {
    width: 48px; height: 48px; border-radius: 50%;
    background: #1a1a1a; border: 2px solid var(--border-stone);
    font-size: 22px; cursor: pointer; display: flex;
    align-items: center; justify-content: center;
    transition: all 0.2s; box-shadow: 0 4px 12px rgba(0,0,0,0.5);
  }

  #colorToggle:hover { transform: scale(1.1); border-color: var(--accent); }

  #colorPanel {
    position: absolute; bottom: 56px; right: 0;
    background: #111; border: 2px solid var(--border-stone);
    border-radius: 4px; padding: 14px;
    width: 200px;
    display: none; flex-direction: column; gap: 10px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.8);
  }

  #colorPanel.open { display: flex; }
  .color-panel-label { font-size: 6px; color: var(--text-dim); letter-spacing: 1px; }

  .swatches { display: flex; flex-wrap: wrap; gap: 6px; }
  .swatch {
    width: 24px; height: 24px; border-radius: 2px;
    border: 2px solid transparent; cursor: pointer;
    transition: transform 0.15s, border-color 0.15s;
    image-rendering: pixelated;
  }
  .swatch:hover { transform: scale(1.2); border-color: #fff; }
  .swatch.active { border-color: var(--accent); }

  #customColorPicker { width: 100%; height: 32px; border: none; cursor: pointer; border-radius: 2px; }

  /* â”€â”€ FOOTER â”€â”€ */
  footer {
    text-align: center; font-size: 6px; color: var(--text-dim);
    padding: 20px; border-top: 1px solid var(--border-stone);
    letter-spacing: 1px;
  }

  /* â”€â”€ RESPONSIVE â”€â”€ */
  @media (max-width: 480px) {
    .entity-grid { grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 8px; }
    .stat-grid { grid-template-columns: 1fr; }
  }

  /* â”€â”€ STRUCTURE CARDS â”€â”€ */
  .structure-card:hover { border-color: var(--yellow); box-shadow: 0 8px 24px rgba(255,193,7,0.2); }

  .rarity-badge {
    display: inline-block; font-size: 6px; padding: 3px 8px;
    border-radius: 2px; border: 1px solid;
    letter-spacing: 1px; text-transform: uppercase;
    font-family: 'Press Start 2P', monospace;
  }
  .rarity-common   { color: #888; border-color: #444; background: rgba(255,255,255,0.04); }
  .rarity-uncommon { color: var(--blue); border-color: var(--blue); background: rgba(33,150,243,0.1); }
  .rarity-rare     { color: var(--purple); border-color: var(--purple); background: rgba(156,39,176,0.12); }
  .rarity-unique   { color: var(--yellow); border-color: var(--yellow); background: rgba(255,193,7,0.1); }

  /* structure rarity filter buttons */
  .filter-btn[data-filter="common"]   { border-color: #555; }
  .filter-btn[data-filter="common"].active   { background: #1a1a1a; border-color: #888; color: #ccc; }
  .filter-btn[data-filter="uncommon"] { border-color: var(--blue); }
  .filter-btn[data-filter="uncommon"].active { background: #001a3a; border-color: var(--blue); color: var(--blue); text-shadow: 0 0 8px var(--blue); }

  /* â”€â”€ VIDEO EMBED â”€â”€ */
  .video-embed { margin-top: 8px; border-radius: 4px; overflow: hidden; border: 2px solid var(--border-stone); }
  .video-embed iframe { display: block; }

  /* â”€â”€ CONCEPT CHIP â”€â”€ */
  .chip.concept-chip { color: var(--purple); border-color: rgba(156,39,176,0.4); cursor: pointer; }
  .chip.concept-chip:hover { border-color: var(--purple); background: rgba(156,39,176,0.08); transform: translateY(-1px); }

  /* â”€â”€ STRUCTURE CHIP (in location / mob modals) â”€â”€ */
  .chip.struct-chip { color: var(--yellow); border-color: rgba(255,193,7,0.4); cursor: pointer; }
  .chip.struct-chip:hover { border-color: var(--yellow); background: rgba(255,193,7,0.08); transform: translateY(-1px); }

  /* â”€â”€ BOSS GLOW â”€â”€ */
  @keyframes bossGlow {
    0%,100% { box-shadow: 0 0 10px rgba(156,39,176,0.3); }
    50%      { box-shadow: 0 0 20px rgba(156,39,176,0.7); }
  }

  .mob-card[data-cat="boss"] { animation: bossGlow 2.5s ease-in-out infinite; border-color: #5a1a7a; }

  /* â”€â”€ PIXEL GRID â”€â”€ */
  body::after {
    content: '';
    position: fixed; inset: 0; pointer-events: none;
    background-image:
      linear-gradient(rgba(255,255,255,0.012) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.012) 1px, transparent 1px);
    background-size: 32px 32px; z-index: 0;
  }

  header, .grid-container, .stats-bar { position: relative; z-index: 1; }
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  HEADER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<header>
  <h1>âš” MINECRAFT ENCYCLOPEDIA âš”</h1>
  <p class="subtitle">JAVA EDITION 1.21+ Â· MOBS Â· ITEMS Â· LOCATIONS Â· STRUCTURES</p>

  <div class="tab-nav">
    <button class="tab-btn active" data-tab="mobs">âš” MOBS</button>
    <button class="tab-btn" data-tab="items">ğŸ ITEMS</button>
    <button class="tab-btn" data-tab="locations">ğŸ—º LOCATIONS</button>
    <button class="tab-btn" data-tab="structures">ğŸ° STRUCTURES</button>
  </div>

  <!-- MOBS controls -->
  <div id="mobControls" class="controls">
    <div class="search-wrapper">
      <input type="text" class="search-input" id="mobSearch" placeholder="Search mobs..." autocomplete="off" spellcheck="false">
    </div>
    <div class="filter-buttons" id="mobFilters">
      <button class="filter-btn active" data-filter="all">ALL</button>
      <button class="filter-btn" data-filter="passive">ğŸŒ¿ PASSIVE</button>
      <button class="filter-btn" data-filter="neutral">âš¡ NEUTRAL</button>
      <button class="filter-btn" data-filter="hostile">ğŸ’€ HOSTILE</button>
      <button class="filter-btn" data-filter="boss">ğŸ‘‘ BOSS</button>
    </div>
  </div>

  <!-- ITEMS controls -->
  <div id="itemControls" class="controls" style="display:none">
    <div class="search-wrapper">
      <input type="text" class="search-input" id="itemSearch" placeholder="Search items..." autocomplete="off" spellcheck="false">
    </div>
    <div class="filter-buttons" id="itemFilters">
      <button class="filter-btn active" data-filter="all">ALL</button>
      <button class="filter-btn" data-filter="material">â› MATERIAL</button>
      <button class="filter-btn" data-filter="food">ğŸ– FOOD</button>
      <button class="filter-btn" data-filter="combat">âš” COMBAT</button>
      <button class="filter-btn" data-filter="rare">ğŸ’ RARE</button>
    </div>
  </div>

  <!-- LOCATIONS controls -->
  <div id="locationControls" class="controls" style="display:none">
    <div class="search-wrapper">
      <input type="text" class="search-input" id="locationSearch" placeholder="Search locations..." autocomplete="off" spellcheck="false">
    </div>
    <div class="filter-buttons" id="locationFilters">
      <button class="filter-btn active" data-filter="all">ALL</button>
      <button class="filter-btn" data-filter="overworld">ğŸŒ OVERWORLD</button>
      <button class="filter-btn" data-filter="nether">ğŸ”¥ NETHER</button>
      <button class="filter-btn" data-filter="end">ğŸŒŒ THE END</button>
    </div>
  </div>

  <!-- STRUCTURES controls -->
  <div id="structureControls" class="controls" style="display:none">
    <div class="search-wrapper">
      <input type="text" class="search-input" id="structureSearch" placeholder="Search structures..." autocomplete="off" spellcheck="false">
    </div>
    <div class="filter-buttons" id="structureFilters">
      <button class="filter-btn active" data-filter="all">ALL</button>
      <button class="filter-btn" data-filter="overworld">ğŸŒ OVERWORLD</button>
      <button class="filter-btn" data-filter="nether">ğŸ”¥ NETHER</button>
      <button class="filter-btn" data-filter="end">ğŸŒŒ THE END</button>
      <button class="filter-btn" data-filter="common">â—† COMMON</button>
      <button class="filter-btn" data-filter="uncommon">â—† UNCOMMON</button>
      <button class="filter-btn" data-filter="rare">â—† RARE</button>
    </div>
  </div>
</header>

<div class="stats-bar"><span id="statsText">Loading...</span></div>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  TAB PANES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div class="grid-container">

  <!-- MOBS TAB -->
  <div id="tabMobs" class="tab-pane active">
    <div class="entity-grid" id="mobGrid">
      <div class="no-results" id="mobNoResults">No mobs found. Try a different search!</div>
    </div>
  </div>

  <!-- ITEMS TAB -->
  <div id="tabItems" class="tab-pane">
    <div class="entity-grid" id="itemGrid">
      <div class="no-results" id="itemNoResults">No items found.</div>
    </div>
  </div>

  <!-- LOCATIONS TAB -->
  <div id="tabLocations" class="tab-pane">
    <div class="entity-grid" id="locationGrid">
      <div class="no-results" id="locationNoResults">No locations found.</div>
    </div>
  </div>

  <!-- STRUCTURES TAB -->
  <div id="tabStructures" class="tab-pane">
    <div class="entity-grid" id="structureGrid">
      <div class="no-results" id="structureNoResults">No structures found.</div>
    </div>
  </div>

</div>

<!-- MODAL -->
<div class="modal-overlay" id="modalOverlay">
  <div class="modal" id="modal">
    <div class="modal-header" id="modalHeader">
      <button class="modal-back" id="modalBack">â†© BACK</button>
      <div class="modal-entity-img" id="modalImg"></div>
      <div class="modal-title-block">
        <div class="modal-name" id="modalName"></div>
        <span class="cat-badge" id="modalCat"></span>
      </div>
      <button class="modal-close" id="modalClose">âœ•</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
  </div>
</div>

<!-- LOCATION HUD BANNER -->
<div id="locationHud">
  <span class="hud-text" id="hudText">ğŸ“ Plains</span>
  <button id="locationHudExit">[EXIT]</button>
</div>

<!-- COLOR CUSTOMIZER -->
<div id="colorCustomizer">
  <button id="colorToggle" title="Customize colors">ğŸ¨</button>
  <div id="colorPanel">
    <div class="color-panel-label">BG COLOR</div>
    <input type="color" id="customColorPicker" value="#0d0d0d">
    <div class="color-panel-label">PRESETS</div>
    <div class="swatches" id="swatchContainer">
      <div class="swatch active" data-color="#0d0d0d" style="background:#0d0d0d" title="Default Dark"></div>
      <div class="swatch" data-color="#000d1a" style="background:#000d1a" title="Deep Ocean"></div>
      <div class="swatch" data-color="#1a0500" style="background:#1a0500" title="Nether"></div>
      <div class="swatch" data-color="#0d0014" style="background:#0d0014" title="The End"></div>
      <div class="swatch" data-color="#050508" style="background:#050508" title="Deep Dark"></div>
      <div class="swatch" data-color="#0d1a0d" style="background:#0d1a0d" title="Forest"></div>
      <div class="swatch" data-color="#1a0008" style="background:#1a0008" title="Crimson"></div>
      <div class="swatch" data-color="#1a1200" style="background:#1a1200" title="Desert"></div>
    </div>
  </div>
</div>

<footer>NOT OFFICIAL â€” FAN PROJECT Â· MINECRAFT IS A TRADEMARK OF MOJANG STUDIOS</footer>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MOB DATA (70 mobs)
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const MOBS = [
  // â”€â”€ PASSIVE â”€â”€
  { id:'cow', name:'Cow', cat:'passive', emoji:'ğŸ„', img:'images/cow.png', hp:10, hpMax:20,
    spawn:'Plains, Forest, Meadow', spawnId:'plains',
    drops:['Leather','Raw Beef','Milk (bucket)'],
    desc:'A gentle farm animal that wanders grassy biomes. Cows can be milked with a bucket and bred with wheat. They drop leather and beef, making them one of the most useful passive mobs in the early game.' },
  { id:'pig', name:'Pig', cat:'passive', emoji:'ğŸ·', img:'images/pig.png', hp:10, hpMax:20,
    spawn:'Plains, Savanna, Villages', spawnId:'plains',
    drops:['Raw Porkchop'],
    desc:'A classic Minecraft mob with a love for carrots. Pigs can be ridden with a saddle and steered with a carrot on a stick. They breed with carrots, potatoes, or beetroot. Struck by lightning, they transform into Zombie Piglins.' },
  { id:'sheep', name:'Sheep', cat:'passive', emoji:'ğŸ‘', img:'images/sheep.png', hp:8, hpMax:16,
    spawn:'Plains, Forest', spawnId:'plains',
    drops:['Wool','Raw Mutton'],
    desc:'Sheep are the primary source of wool, available in 16 natural colors. They can be sheared repeatedly and dyed. Rare colors like pink (0.16%) and brown (3%) exist. They breed with wheat and regrow wool by eating grass.' },
  { id:'chicken', name:'Chicken', cat:'passive', emoji:'ğŸ”', img:'images/chicken.png', hp:4, hpMax:8,
    spawn:'Plains, Forest, Villages', spawnId:'plains',
    drops:['Feather','Raw Chicken','Egg (periodically)'],
    desc:'Small and fluttery, chickens lay eggs roughly every 5â€“10 minutes. They fall slowly, are immune to fall damage, and can be attracted with seeds. Baby chickens hatch from thrown eggs (1/8 chance). A staple passive mob for early farms.' },
  { id:'rabbit', name:'Rabbit', cat:'passive', emoji:'ğŸ‡', img:'images/rabbit.png', hp:3, hpMax:6,
    spawn:'Desert, Snowy Plains, Meadow, Taiga', spawnId:'desert',
    drops:['Rabbit Hide','Raw Rabbit',"Rabbit's Foot (rare)"],
    desc:"Timid creatures that hop away from players. Rabbits come in 6 color variants based on biome. The ultra-rare Rabbit's Foot is used in brewing potions of leaping. The legendary \"Killer Bunny\" variant (only via commands) is hostile." },
  { id:'bat', name:'Bat', cat:'passive', emoji:'ğŸ¦‡', img:'images/bat.png', hp:3, hpMax:6,
    spawn:'Caves (below y=63)', spawnId:'deep_dark',
    drops:[],
    desc:'Nocturnal cave dwellers that hang upside down from ceilings during the day. Bats emit squeaking sounds and are entirely harmless. They drop nothing but serve as atmospheric indicators of dark cave systems beneath the surface.' },
  { id:'cat', name:'Cat', cat:'passive', emoji:'ğŸ±', img:'images/cat.png', hp:10, hpMax:20,
    spawn:'Villages, Swamp Huts', spawnId:'swamp',
    drops:['String'],
    desc:'Cats spawn in villages near villagers. They can be tamed with raw cod or salmon. Tamed cats give the player a random morning gift. Creepers and Phantoms avoid cats, making them great base companions. 11 coat variants exist.' },
  { id:'wolf', name:'Wolf', cat:'neutral', emoji:'ğŸº', img:'images/wolf.png', hp:8, hpMax:16,
    spawn:'Taiga, Old Growth Taiga', spawnId:'taiga',
    drops:[],
    desc:'Wolves are neutral until provoked or their pack is attacked. Tamed with bones, they become loyal dogs that follow and protect players. Armored variants exist in different biomes. Tamed wolves have 20 HP and can be healed with meat.' },
  { id:'horse', name:'Horse', cat:'passive', emoji:'ğŸ´', img:'images/horse.png', hp:15, hpMax:30,
    spawn:'Plains, Savanna', spawnId:'plains',
    drops:['Leather'],
    desc:'Horses are tameable mounts ridden with a saddle. They have 7 coat colors and 5 marking patterns, creating 35 unique visual variants. Speed, jump height, and health vary randomly. Bred with golden apples or golden carrots.' },
  { id:'donkey', name:'Donkey', cat:'passive', emoji:'ğŸ«', img:'images/donkey.png', hp:13, hpMax:26,
    spawn:'Plains, Savanna', spawnId:'plains',
    drops:['Leather'],
    desc:'Donkeys can be equipped with a chest for 15 slots of mobile storage â€” essential for long expeditions. They are slower than horses but invaluable for hauling. Bred with horses to produce mules.' },
  { id:'mule', name:'Mule', cat:'passive', emoji:'ğŸ´', img:'images/mule.png', hp:15, hpMax:30,
    spawn:'Bred from Horse + Donkey', spawnId:'plains',
    drops:['Leather'],
    desc:'The offspring of a horse and donkey. Mules combine decent speed with the ability to carry a chest. They cannot breed further, being infertile hybrids. Faster than donkeys and more practical than horses for storage runs.' },
  { id:'llama', name:'Llama', cat:'neutral', emoji:'ğŸ¦™', img:'images/llama.png', hp:15, hpMax:30,
    spawn:'Savanna, Mountains', spawnId:'savanna',
    drops:['Leather'],
    desc:'Llamas are tameable but not rideable (without leads). They can carry a chest (3â€“15 slots depending on strength) and spit at threats. Wandering Traders arrive leading two llamas.' },
  { id:'parrot', name:'Parrot', cat:'passive', emoji:'ğŸ¦œ', img:'images/parrot.png', hp:3, hpMax:6,
    spawn:'Jungle', spawnId:'jungle',
    drops:['Feather'],
    desc:"Colourful jungle birds that mimic the sounds of nearby mobs. Tamed with seeds, they sit on the player's shoulder. Available in 5 colors: red, green, blue, cyan, and gray. Do NOT feed them cookies!" },
  { id:'mooshroom', name:'Mooshroom', cat:'passive', emoji:'ğŸ„', img:'images/mooshroom.png', hp:10, hpMax:20,
    spawn:'Mushroom Fields', spawnId:'mushroom_fields',
    drops:['Leather','Raw Beef','Mushroom (when sheared)'],
    desc:'A red-and-white mushroom-covered cow found only in the rare Mushroom Fields biome. Can be milked for Mushroom Stew with a bowl. Shearing removes its mushrooms and turns it into a normal cow.' },
  { id:'squid', name:'Squid', cat:'passive', emoji:'ğŸ¦‘', img:'images/squid.png', hp:10, hpMax:20,
    spawn:'Ocean, Rivers', spawnId:'ocean',
    drops:['Ink Sac'],
    desc:'Eight-armed ocean dwellers that release a cloud of ink particles when attacked. Squids move by jetting water. Ink sacs are used for black dye and writing in books.' },
  { id:'glow_squid', name:'Glow Squid', cat:'passive', emoji:'âœ¨', img:'images/glow_squid.png', hp:10, hpMax:20,
    spawn:'Deep Ocean, Underground water (below y=30)', spawnId:'ocean',
    drops:['Glow Ink Sac'],
    desc:'A bioluminescent cousin of the squid found in dark underwater depths. When attacked, it emits glowing ink and loses its glow temporarily. Glow Ink Sacs make signs glow and create glow item frames.' },
  { id:'axolotl', name:'Axolotl', cat:'passive', emoji:'ğŸ¦', img:'images/axolotl.png', hp:14, hpMax:28,
    spawn:'Lush Caves', spawnId:'lush_caves',
    drops:[],
    desc:'Aquatic amphibians that attack fish, squid, and drowned mobs â€” making them ideal companions for ocean combat. They come in 5 colors; the rare blue variant has a 1/1200 chance. They can play dead when damaged.' },
  { id:'frog', name:'Frog', cat:'passive', emoji:'ğŸ¸', img:'images/frog.png', hp:5, hpMax:10,
    spawn:'Swamp, Mangrove Swamp', spawnId:'swamp',
    drops:[],
    desc:'Frogs come in 3 variants â€” temperate, warm, and cold â€” depending on temperature. They eat small slimes and small magma cubes, producing Froglight blocks.' },
  { id:'tadpole', name:'Tadpole', cat:'passive', emoji:'ğŸŸ', img:'images/tadpole.png', hp:3, hpMax:6,
    spawn:'Swamp, Mangrove Swamp (spawned by Frogs)', spawnId:'swamp',
    drops:[],
    desc:'Baby frogs that exist only in water. They grow into frogs whose variant depends on the temperature of the biome they mature in. Can be collected in buckets.' },
  { id:'sniffer', name:'Sniffer', cat:'passive', emoji:'ğŸ¦•', img:'images/sniffer.png', hp:14, hpMax:28,
    spawn:'Hatched from Sniffer Eggs (Ocean Ruins)', spawnId:'ocean',
    drops:['Torchflower Seeds','Pitcher Pods'],
    desc:'An ancient mob resurrected from eggs found in ocean ruins. Sniffers use their giant nose to sniff out ancient plant seeds buried in dirt and grass blocks.' },
  { id:'allay', name:'Allay', cat:'passive', emoji:'ğŸ§š', img:'images/allay.png', hp:10, hpMax:20,
    spawn:'Pillager Outposts (cages), Woodland Mansions (cages)', spawnId:'plains',
    drops:[],
    desc:'A small, helpful fairy-like mob found caged in outposts and mansions. When given an item, the Allay collects matching items from the world and brings them back.' },
  { id:'strider', name:'Strider', cat:'passive', emoji:'ğŸ”´', img:'images/strider.png', hp:10, hpMax:20,
    spawn:'Nether (Lava Sea, Crimson Forest)', spawnId:'nether_wastes',
    drops:['String'],
    desc:'Strange lava-walking creatures of the Nether. Striders are the only mobs that can safely traverse lava oceans and can be ridden with a saddle and warped fungus on a stick.' },
  { id:'turtle', name:'Turtle', cat:'passive', emoji:'ğŸ¢', img:'images/turtle.png', hp:15, hpMax:30,
    spawn:'Beach', spawnId:'beach',
    drops:['Seagrass','Scute (baby, when growing up)'],
    desc:'Turtles are slow on land but swift underwater. They always return to their home beach to lay eggs. Baby turtles drop scutes when they grow up â€” 5 scutes craft a Turtle Shell helmet.' },
  { id:'panda', name:'Panda', cat:'neutral', emoji:'ğŸ¼', img:'images/panda.png', hp:10, hpMax:20,
    spawn:'Jungle, Bamboo Jungle', spawnId:'jungle',
    drops:['Bamboo','Slimeball (rare)'],
    desc:'Pandas have 7 personality types: normal, lazy, worried, playful, aggressive, weak, and brown. Worried pandas sneeze and look away from thunderstorms.' },
  { id:'fox', name:'Fox', cat:'passive', emoji:'ğŸ¦Š', img:'images/fox.png', hp:10, hpMax:20,
    spawn:'Taiga, Old Growth Taiga', spawnId:'taiga',
    drops:['Item they hold'],
    desc:'Clever, skittish foxes that sleep during the day and hunt at night. They attack chickens, rabbits, and fish. Foxes trust the player if bred in captivity.' },
  { id:'bee', name:'Bee', cat:'neutral', emoji:'ğŸ', img:'images/bee.png', hp:5, hpMax:10,
    spawn:'Flower Forest, Plains, Mangrove Swamp (near Bee Nests)', spawnId:'plains',
    drops:[],
    desc:'Bees pollinate flowers and return to their hive. If their hive is destroyed without Silk Touch, they become hostile. Honeycombs and honey bottles are harvested from full hives.' },
  { id:'tropical_fish', name:'Tropical Fish', cat:'passive', emoji:'ğŸ ', img:'images/tropical_fish.png', hp:3, hpMax:6,
    spawn:'Warm Ocean, Lukewarm Ocean, Lush Caves', spawnId:'warm_ocean',
    drops:['Tropical Fish','Bone Meal (rare)'],
    desc:'With 2700+ possible color and shape combinations, tropical fish are the most visually diverse mob in the game. They travel in schools and can be collected in buckets.' },
  { id:'cod', name:'Cod', cat:'passive', emoji:'ğŸŸ', img:'images/cod.png', hp:3, hpMax:6,
    spawn:'Lukewarm, Normal, Cold Ocean, River', spawnId:'ocean',
    drops:['Raw Cod','Bone Meal (rare)'],
    desc:'Common fish that swim in schools across most ocean biomes. Cod is a foundational early-game food source and an essential taming item for cats, dolphins, and axolotls.' },
  { id:'salmon', name:'Salmon', cat:'passive', emoji:'ğŸŸ', img:'images/salmon.png', hp:3, hpMax:6,
    spawn:'Cold Ocean, River, Frozen Ocean', spawnId:'ocean',
    drops:['Raw Salmon','Bone Meal (rare)'],
    desc:'Salmon spawn in cold ocean biomes and rivers. They come in 3 sizes: small, normal, and large. Cooked salmon restores more hunger than cooked cod.' },
  { id:'pufferfish', name:'Pufferfish', cat:'passive', emoji:'ğŸ¡', img:'images/pufferfish.png', hp:3, hpMax:6,
    spawn:'Warm Ocean, Lukewarm Ocean', spawnId:'warm_ocean',
    drops:['Pufferfish'],
    desc:'Pufferfish inflate into a spiky ball when approached, inflicting Poison and Nausea on contact. Essential for brewing Potions of Water Breathing.' },
  { id:'dolphin', name:'Dolphin', cat:'neutral', emoji:'ğŸ¬', img:'images/dolphin.png', hp:10, hpMax:20,
    spawn:'Non-frozen Ocean biomes', spawnId:'ocean',
    drops:['Raw Cod'],
    desc:"Playful, social cetaceans that leap out of water and ride boat wakes. Dolphins grant the Dolphin's Grace status effect, greatly boosting swim speed. They lead players to buried treasure when fed raw fish." },
  { id:'goat', name:'Goat', cat:'neutral', emoji:'ğŸ', img:'images/goat.png', hp:10, hpMax:20,
    spawn:'Jagged Peaks, Frozen Peaks, Snowy Slopes', spawnId:'mountains',
    drops:['Goat Horn'],
    desc:'Mountain-dwelling goats that occasionally ram into players and mobs unprovoked. Screaming Goat variants (2%) ram much more frequently. They can drop up to 2 Goat Horns per goat.' },
  { id:'camel', name:'Camel', cat:'passive', emoji:'ğŸª', img:'images/camel.png', hp:16, hpMax:32,
    spawn:'Desert Villages', spawnId:'desert',
    drops:[],
    desc:'A tall rideable mob that fits two players on one saddle. Camels walk faster than horses and can dash forward with a cooldown. They are tall enough that most hostile mobs cannot reach the rider.' },
  { id:'armadillo', name:'Armadillo', cat:'passive', emoji:'ğŸª²', img:'images/armadillo.png', hp:6, hpMax:12,
    spawn:'Badlands, Savanna', spawnId:'badlands',
    drops:['Armadillo Scute'],
    desc:'A small mob that rolls into a protective ball when it detects a nearby threat. Armadillo Scutes are used to craft Wolf Armor. Added in Java 1.21.' },
  // â”€â”€ NEUTRAL â”€â”€
  { id:'polar_bear', name:'Polar Bear', cat:'neutral', emoji:'ğŸ»â€â„ï¸', img:'images/polar_bear.png', hp:15, hpMax:30,
    spawn:'Snowy Plains, Ice Spikes, Frozen Ocean', spawnId:'snowy_plains',
    drops:['Raw Cod','Raw Salmon'],
    desc:'Polar bears are neutral unless they have cubs nearby, in which case they become fiercely hostile. Mother bears with cubs are among the most dangerous neutral mobs at close range.' },
  { id:'enderman', name:'Enderman', cat:'neutral', emoji:'ğŸ•´ï¸', img:'images/enderman.png', hp:20, hpMax:40,
    spawn:'Overworld (low light), The End, Nether Wastes', spawnId:'the_end',
    drops:['Ender Pearl'],
    desc:'Tall, dark beings from The End who become hostile when you look directly at their eyes. They can teleport, pick up blocks, and are immune to projectiles. They take damage from water and rain.' },
  { id:'zombified_piglin', name:'Zombified Piglin', cat:'neutral', emoji:'ğŸ§Ÿ', img:'images/zombified_piglin.png', hp:10, hpMax:20,
    spawn:'Nether (Crimson Forest, Nether Wastes, Portal edges)', spawnId:'nether_wastes',
    drops:['Gold Nugget','Rotten Flesh','Gold Sword (rare)'],
    desc:'Undead piglins that roam the Nether in packs. Neutral until attacked â€” then the ENTIRE nearby group becomes hostile simultaneously. Pigs struck by lightning transform into them.' },
  { id:'piglin', name:'Piglin', cat:'neutral', emoji:'ğŸ·', img:'images/piglin.png', hp:8, hpMax:16,
    spawn:'Nether (Crimson Forest, Bastion Remnant)', spawnId:'crimson_forest',
    drops:['Gold Nugget','Cooked Porkchop','Various Nether items'],
    desc:'Piglins are neutral to players wearing gold armor. They can be bartered with â€” throw a gold ingot and receive a random Nether item. They become zombified within 15 seconds of entering the Overworld.' },
  { id:'spider', name:'Spider', cat:'neutral', emoji:'ğŸ•·ï¸', img:'images/spider.png', hp:8, hpMax:16,
    spawn:'Overworld (low light)', spawnId:'plains',
    drops:['String','Spider Eye'],
    desc:'Large arthropods that can climb walls and fit through 1Ã—1 gaps. Neutral in daylight, hostile at night. Spider Jockeys â€” spiders ridden by Skeletons â€” have a 1% spawn chance.' },
  { id:'cave_spider', name:'Cave Spider', cat:'neutral', emoji:'ğŸ•¸ï¸', img:'images/cave_spider.png', hp:6, hpMax:12,
    spawn:'Mineshafts (spawner)', spawnId:'dripstone_caves',
    drops:['String','Spider Eye'],
    desc:'Smaller and faster than regular spiders, cave spiders can fit through half-block gaps and deal Poison on their bite in Normal/Hard mode. They only spawn from spawners in mineshafts.' },
  // â”€â”€ HOSTILE â”€â”€
  { id:'zombie', name:'Zombie', cat:'hostile', emoji:'ğŸ§Ÿ', img:'images/zombie.png', hp:10, hpMax:20,
    spawn:'Overworld (light level 0)', spawnId:'plains',
    drops:['Rotten Flesh','Carrot (rare)','Potato (rare)','Iron Ingot (rare)'],
    desc:'The quintessential Minecraft mob. Zombies shamble toward players and villagers, breaking down doors on Hard difficulty. They burn in sunlight unless wearing a helmet.' },
  { id:'skeleton', name:'Skeleton', cat:'hostile', emoji:'ğŸ’€', img:'images/skeleton.png', hp:10, hpMax:20,
    spawn:'Overworld (light level 0)', spawnId:'plains',
    drops:['Bone','Arrow','Bow (rare)'],
    desc:'Ranged undead archers that strafe while keeping distance. They burn in sunlight. The Stray is a cold-biome variant, and Bogged is a mushroom-shrouded variant added in 1.21.' },
  { id:'creeper', name:'Creeper', cat:'hostile', emoji:'ğŸ’š', img:'images/creeper.png', hp:10, hpMax:20,
    spawn:'Overworld (light level 0)', spawnId:'plains',
    drops:['Gunpowder','Music Disc (killed by Skeleton)'],
    desc:'The iconic silent explosive mob. Creepers sneak up and detonate (1.5s fuse) when within 3 blocks. Charged Creepers have a doubled blast radius. Cats scare them away.' },
  { id:'witch', name:'Witch', cat:'hostile', emoji:'ğŸ§™', img:'images/witch.png', hp:13, hpMax:26,
    spawn:'Overworld (light level 0), Swamp Huts', spawnId:'swamp',
    drops:['Glowstone Dust','Sugar','Redstone','Spider Eye','Gunpowder','Stick','Glass Bottle','Potion'],
    desc:'Potion-throwing mages that heal themselves with Instant Health. They throw Slowness, Poison, Weakness, and Harming potions at players. Witches always spawn in swamp huts.' },
  { id:'slime', name:'Slime', cat:'hostile', emoji:'ğŸŸ©', img:'images/slime.png', hp:4, hpMax:8,
    spawn:'Swamps (night), Slime Chunks (below y=40)', spawnId:'swamp',
    drops:['Slimeball'],
    desc:'Cube-shaped mobs that split into 2 smaller versions when killed. Slimeballs are crafted into sticky pistons, leads, and magma cream. Slime chunks are fixed grid-based locations in every world.' },
  { id:'magma_cube', name:'Magma Cube', cat:'hostile', emoji:'ğŸ”¶', img:'images/magma_cube.png', hp:4, hpMax:8,
    spawn:'Nether (Basalt Deltas, Nether Fortress)', spawnId:'basalt_deltas',
    drops:['Magma Cream'],
    desc:'The Nether equivalent of Slimes. They spring forward and split into smaller cubes when killed. Fire and lava deal no damage to them. Magma Cream is essential for brewing Fire Resistance potions.' },
  { id:'blaze', name:'Blaze', cat:'hostile', emoji:'ğŸ”¥', img:'images/blaze.png', hp:10, hpMax:20,
    spawn:'Nether Fortress (spawner)', spawnId:'nether_wastes',
    drops:['Blaze Rod'],
    desc:'Floating fire entities that launch volleys of fireballs. Blaze Rods power brewing stands and craft Eyes of Ender needed to reach The End. Snowballs deal 3 damage to Blazes.' },
  { id:'ghast', name:'Ghast', cat:'hostile', emoji:'ğŸ‘»', img:'images/ghast.png', hp:5, hpMax:10,
    spawn:'Nether (all biomes, open areas)', spawnId:'nether_wastes',
    drops:['Gunpowder','Ghast Tear'],
    desc:'Massive 4Ã—4 block floating jellyfish that scream and shoot explosive fireballs. Their fireballs can be deflected back by hitting them. Ghast Tears are used in brewing Potions of Regeneration.' },
  { id:'drowned', name:'Drowned', cat:'hostile', emoji:'ğŸŒŠ', img:'images/drowned.png', hp:10, hpMax:20,
    spawn:'Ocean, Rivers, Water (Zombies that drown)', spawnId:'ocean',
    drops:['Rotten Flesh','Copper Ingot (rare)','Trident (rare)'],
    desc:'Aquatic zombie variants that hunt players underwater. Some carry tridents, making them the only source of this weapon in survival. They can convert Zombies that drown.' },
  { id:'husk', name:'Husk', cat:'hostile', emoji:'ğŸœï¸', img:'images/husk.png', hp:10, hpMax:20,
    spawn:'Desert biome', spawnId:'desert',
    drops:['Rotten Flesh','Sand (occasional)'],
    desc:'Desert variant of the Zombie. Unlike regular zombies, Husks do NOT burn in sunlight. Their attacks inflict the Hunger status effect. They convert into Zombies when submerged in water.' },
  { id:'stray', name:'Stray', cat:'hostile', emoji:'â„ï¸', img:'images/stray.png', hp:10, hpMax:20,
    spawn:'Frozen Ocean, Snowy Plains, Snowy Slopes', spawnId:'snowy_plains',
    drops:['Bone','Arrow of Slowness'],
    desc:'A cold-variant skeleton wrapped in icy rags. Strays fire arrows tipped with Slowness, making escape difficult. They burn in sunlight like regular skeletons.' },
  { id:'phantom', name:'Phantom', cat:'hostile', emoji:'ğŸ¦‡', img:'images/phantom.png', hp:10, hpMax:20,
    spawn:'Overworld sky (after player skips 3+ nights without sleeping)', spawnId:'plains',
    drops:['Phantom Membrane'],
    desc:"Flying undead that swoop at sleep-deprived players. Phantom Membranes repair Elytra and brew Potions of Slow Falling. Cats scare Phantoms away." },
  { id:'silverfish', name:'Silverfish', cat:'hostile', emoji:'ğŸª²', img:'images/silverfish.png', hp:4, hpMax:8,
    spawn:'Strongholds, Extreme Hills', spawnId:'mountains',
    drops:[],
    desc:'Tiny arthropods that hide inside Infested Blocks. The Silverfish room in Strongholds can swarm players unexpectedly during End Portal discovery.' },
  { id:'endermite', name:'Endermite', cat:'hostile', emoji:'ğŸ”®', img:'images/endermite.png', hp:4, hpMax:8,
    spawn:'Teleportation of Endermen / throwing Ender Pearls (5% chance)', spawnId:'the_end',
    drops:[],
    desc:'Tiny purple arthropods that spawn rarely when throwing Ender Pearls. They are hated by Endermen, who will prioritize attacking them. Endermites despawn within 2 minutes unless named.' },
  { id:'vindicator', name:'Vindicator', cat:'hostile', emoji:'ğŸª“', img:'images/vindicator.png', hp:12, hpMax:24,
    spawn:'Woodland Mansion, Raids', spawnId:'dark_forest',
    drops:['Emerald','Iron Axe (rare)'],
    desc:'Illager warriors armed with iron axes that deal massive melee damage. Named "Johnny" via Name Tag, they become hostile to ALL mobs except Illagers and Ghasts.' },
  { id:'evoker', name:'Evoker', cat:'hostile', emoji:'ğŸª„', img:'images/evoker.png', hp:12, hpMax:24,
    spawn:'Woodland Mansion, Raids (Wave 5+)', spawnId:'dark_forest',
    drops:['Totem of Undying','Emerald'],
    desc:'Powerful Illager mage that summons Vexes and creates fang attacks. The only source of the Totem of Undying. Evokers are among the most dangerous overworld mobs.' },
  { id:'vex', name:'Vex', cat:'hostile', emoji:'ğŸ‘º', img:'images/vex.png', hp:7, hpMax:14,
    spawn:'Summoned by Evoker', spawnId:'dark_forest',
    drops:[],
    desc:'Tiny winged demons summoned in groups of 3 by Evokers. Vexes phase through blocks, walls, and terrain to attack. They begin taking damage after 30â€“119 seconds.' },
  { id:'pillager', name:'Pillager', cat:'hostile', emoji:'ğŸ¹', img:'images/pillager.png', hp:12, hpMax:24,
    spawn:'Pillager Outpost, Raids, Patrol', spawnId:'plains',
    drops:['Arrow','Crossbow (rare)'],
    desc:'Crossbow-wielding Illagers that roam the world in patrols and guard Outposts. Killing an Outpost captain gives the player Bad Omen, triggering a Village Raid.' },
  { id:'ravager', name:'Ravager', cat:'hostile', emoji:'ğŸ¦', img:'images/ravager.png', hp:50, hpMax:100,
    spawn:'Raids (Wave 3+)', spawnId:'plains',
    drops:['Saddle'],
    desc:'A massive, armored beast that charges and destroys crops and blocks. Ravagers are raid-exclusive â€” among the toughest Overworld mobs with 100 HP.' },
  { id:'guardian', name:'Guardian', cat:'hostile', emoji:'ğŸ”µ', img:'images/guardian.png', hp:15, hpMax:30,
    spawn:'Ocean Monument', spawnId:'ocean',
    drops:['Prismarine Shard','Prismarine Crystal','Raw Cod'],
    desc:'Thorny aquatic enemies that guard Ocean Monuments. They fire laser beams that charge up over several seconds. The primary source of Prismarine and Sea Lanterns.' },
  { id:'elder_guardian', name:'Elder Guardian', cat:'boss', emoji:'ğŸ‘ï¸', img:'images/elder_guardian.png', hp:40, hpMax:80,
    spawn:'Ocean Monument (3 per structure)', spawnId:'ocean',
    drops:['Sponge','Prismarine Shard','Wet Sponge','Raw Cod'],
    desc:'A massive ancient Guardian â€” the mini-boss of the Ocean Monument. Three Elder Guardians guard each monument. They inflict Mining Fatigue III on nearby players.' },
  { id:'shulker', name:'Shulker', cat:'hostile', emoji:'ğŸŸª', img:'images/shulker.png', hp:15, hpMax:30,
    spawn:'End Cities', spawnId:'the_end',
    drops:['Shulker Shell'],
    desc:'Shell-covered mobs that hide in blocks and fire homing projectiles that inflict Levitation. Two Shulker Shells craft the invaluable Shulker Box â€” a portable chest that keeps its contents when broken.' },
  { id:'hoglin', name:'Hoglin', cat:'hostile', emoji:'ğŸ—', img:'images/hoglin.png', hp:20, hpMax:40,
    spawn:'Nether (Crimson Forest)', spawnId:'crimson_forest',
    drops:['Raw Porkchop','Leather'],
    desc:'Aggressive Nether boars that knock players high into the air. They are the only renewable food source in the Nether. Baby Hoglins are passive and can be bred with Crimson Fungi.' },
  { id:'zoglin', name:'Zoglin', cat:'hostile', emoji:'ğŸ§Ÿ', img:'images/zoglin.png', hp:20, hpMax:40,
    spawn:'Overworld/End (when Hoglin enters from Nether)', spawnId:'the_end',
    drops:['Rotten Flesh'],
    desc:'A zombified Hoglin formed when a Hoglin enters the Overworld or End. Zoglins are immune to fire and attack every mob they see â€” except Creepers.' },
  { id:'warden', name:'Warden', cat:'boss', emoji:'ğŸ’š', img:'images/warden.png', hp:250, hpMax:500,
    spawn:'Deep Dark (summoned by 3 Sculk Shriek activations)', spawnId:'deep_dark',
    drops:['Sculk Catalyst'],
    desc:'The strongest mob in Minecraft. Completely blind, the Warden detects players through vibrations, smell, and sound. It has 500 HP and deals 22.5 damage. The recommended strategy is to AVOID it.' },
  { id:'breeze', name:'Breeze', cat:'hostile', emoji:'ğŸ’¨', img:'images/breeze.png', hp:15, hpMax:30,
    spawn:'Trial Chambers', spawnId:'dripstone_caves',
    drops:['Breeze Rod'],
    desc:'An agile wind-based mob exclusive to Trial Chambers. It leaps around and fires Wind Charges that knock back players. Breeze Rods craft the new Mace weapon.' },
  { id:'bogged', name:'Bogged', cat:'hostile', emoji:'ğŸ„', img:'images/bogged.png', hp:8, hpMax:16,
    spawn:'Swamp, Mangrove Swamp, Trial Chambers', spawnId:'swamp',
    drops:['Bone','Arrow of Poison','Mushroom (Brown/Red)'],
    desc:'A skeleton variant covered in mushrooms and moss. Added in Java 1.21, Bogged skeletons fire Poison-tipped arrows. They can be sheared to remove their mushrooms.' },
  { id:'creaking', name:'Creaking', cat:'hostile', emoji:'ğŸŒ³', img:'images/creaking.png', hp:1, hpMax:20,
    spawn:'Pale Garden (night, spawned by Creaking Heart)', spawnId:'pale_garden',
    drops:[],
    desc:'A ghostly wooden mob linked to a Creaking Heart block in a nearby Pale Oak tree. They only move when NOT being directly observed â€” they freeze when a player looks at them.' },
  // â”€â”€ BOSSES â”€â”€
  { id:'ender_dragon', name:'Ender Dragon', cat:'boss', emoji:'ğŸ‰', img:'images/ender_dragon.png', hp:100, hpMax:200,
    spawn:'The End (spawns on first entry)', spawnId:'the_end',
    drops:['Dragon Egg (first kill only)','XP (12000)','End Portal activation'],
    desc:'The final boss of Minecraft. The Ender Dragon circles the End while being healed by End Crystals. Destroy all crystals, then deal damage during landing phases. On death, she drops 12,000 XP and the Dragon Egg.' },
  { id:'wither', name:'Wither', cat:'boss', emoji:'ğŸ’€', img:'images/wither.png', hp:150, hpMax:300,
    spawn:'Player-summoned (4 Soul Sand + 3 Wither Skulls)', spawnId:'soul_sand_valley',
    drops:['Nether Star'],
    desc:'A three-headed, player-summoned boss of destruction. The Wither fires explosive skulls and inflicts the Wither effect. The Nether Star it drops is used to craft Beacons.' },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ITEMS DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const ITEMS = [
  { id:'leather', name:'Leather', img:'items/leather.png', emoji:'ğŸŸ«', category:'material',
    desc:'Obtained from cows, horses, donkeys, mules, llamas, rabbits, and hoglins. Used to craft leather armor â€” the first tier of protection â€” and item frames, books, and saddle components.',
    usedFor:['Leather Armor','Book','Item Frame'],
    usedForIds:['leather_armor','book'],
    craftedFrom:[],
    droppedBy:['cow','horse','donkey','mule','llama','hoglin','rabbit','fox'] },

  { id:'raw_beef', name:'Raw Beef', img:'items/raw_beef.png', emoji:'ğŸ¥©', category:'food',
    desc:'Dropped by cows and mooshrooms. Cooks into Steak, the most filling regular food in the game.',
    usedFor:['Steak (cooked)'],
    craftedFrom:[],
    droppedBy:['cow','mooshroom'] },

  { id:'raw_porkchop', name:'Raw Porkchop', img:'items/raw_porkchop.png', emoji:'ğŸ¥©', category:'food',
    desc:'Dropped by pigs and hoglins. Cooks into a Cooked Porkchop, an excellent mid-game food.',
    usedFor:['Cooked Porkchop'],
    craftedFrom:[],
    droppedBy:['pig','hoglin'] },

  { id:'wool', name:'Wool', img:'items/white_wool.png', emoji:'ğŸŸ¨', category:'material',
    desc:'Dropped by sheep or obtained by shearing them. Available in 16 colors. Used to craft beds, carpets, and more.',
    usedFor:['Bed','Carpet','Painting','Banner'],
    usedForIds:['bed'],
    craftedFrom:[],
    droppedBy:['sheep'] },

  { id:'raw_mutton', name:'Raw Mutton', img:'items/raw_mutton.png', emoji:'ğŸ¥©', category:'food',
    desc:'Dropped by sheep. Cooks into Cooked Mutton.',
    usedFor:['Cooked Mutton'],
    craftedFrom:[],
    droppedBy:['sheep'] },

  { id:'feather', name:'Feather', img:'items/feather.png', emoji:'ğŸª¶', category:'material',
    desc:'Dropped by chickens and parrots. Essential for crafting arrows and quills (book and quill).',
    usedFor:['Arrow','Book and Quill'],
    usedForIds:['arrow','book_and_quill'],
    craftedFrom:[],
    droppedBy:['chicken','parrot'] },

  { id:'raw_chicken', name:'Raw Chicken', img:'items/raw_chicken.png', emoji:'ğŸ—', category:'food',
    desc:'Dropped by chickens. Has a 30% chance of inflicting Hunger when eaten raw. Cooks into Cooked Chicken.',
    usedFor:['Cooked Chicken'],
    craftedFrom:[],
    droppedBy:['chicken'] },

  { id:'egg', name:'Egg', img:'items/egg.png', emoji:'ğŸ¥š', category:'material',
    desc:'Periodically laid by chickens. Can be thrown to spawn baby chickens (1/8 chance). Used in cake and other food recipes.',
    usedFor:['Cake','Pumpkin Pie'],
    craftedFrom:[],
    droppedBy:['chicken'] },

  { id:'rabbit_hide', name:'Rabbit Hide', img:'items/rabbit_hide.png', emoji:'ğŸŸ«', category:'material',
    desc:'Dropped by rabbits. 4 rabbit hides craft into Leather.',
    usedFor:['Leather (4 hides)'],
    craftedFrom:[],
    droppedBy:['rabbit'] },

  { id:'raw_rabbit', name:'Raw Rabbit', img:'items/raw_rabbit.png', emoji:'ğŸ¥©', category:'food',
    desc:'Dropped by rabbits. Cooks into Cooked Rabbit, used in Rabbit Stew.',
    usedFor:['Cooked Rabbit','Rabbit Stew'],
    craftedFrom:[],
    droppedBy:['rabbit'] },

  { id:'rabbits_foot', name:"Rabbit's Foot", img:"items/rabbit's_foot.png", emoji:'ğŸ¦¶', category:'rare',
    desc:'A rare 10% drop from rabbits. Used in brewing the Potion of Leaping.',
    usedFor:['Potion of Leaping'],
    usedForIds:['potion_of_leaping'],
    craftedFrom:[],
    droppedBy:['rabbit'] },

  { id:'string', name:'String', img:'items/string.png', emoji:'ğŸ§µ', category:'material',
    desc:'Dropped by spiders, cave spiders, cats, and striders. Used to craft bows, crossbows, fishing rods, wool, leads, and tripwire hooks.',
    usedFor:['Bow','Crossbow','Fishing Rod','Wool','Lead','Tripwire Hook'],
    usedForIds:['','','','','lead',''],
    craftedFrom:[],
    droppedBy:['cat','strider','spider','cave_spider'] },

  { id:'ink_sac', name:'Ink Sac', img:'items/ink_sac.png', emoji:'â¬›', category:'material',
    desc:'Dropped by squids. Used as black dye for wool, glass, and writing in books.',
    usedFor:['Black Dye','Book and Quill (writing)'],
    usedForIds:['','book_and_quill'],
    craftedFrom:[],
    droppedBy:['squid'] },

  { id:'glow_ink_sac', name:'Glow Ink Sac', img:'items/glow_ink_sac.png', emoji:'âœ¨', category:'rare',
    desc:'Dropped by Glow Squids. Makes signs glow and creates Glow Item Frames.',
    usedFor:['Glow Sign Text','Glow Item Frame'],
    usedForIds:['','glow_item_frame'],
    craftedFrom:[],
    droppedBy:['glow_squid'] },

  { id:'torchflower_seeds', name:'Torchflower Seeds', img:'items/torchflower_seeds.png', emoji:'ğŸŒ¸', category:'rare',
    desc:'Sniffed out by Sniffers from ancient seeds buried in the ground. Plant to grow Torchflowers.',
    usedFor:['Torchflower','Suspicious Stew'],
    craftedFrom:[],
    droppedBy:['sniffer'] },

  { id:'pitcher_pods', name:'Pitcher Pods', img:'items/pitcher_pod.png', emoji:'ğŸŒ¿', category:'rare',
    desc:'Sniffed out by Sniffers. Plant to grow into Pitcher Plants.',
    usedFor:['Pitcher Plant'],
    craftedFrom:[],
    droppedBy:['sniffer'] },

  { id:'seagrass', name:'Seagrass', img:'items/seagrass.png', emoji:'ğŸŒ¿', category:'material',
    desc:'Dropped by turtles. Found in oceans. Used to breed turtles.',
    usedFor:['Turtle Breeding'],
    craftedFrom:[],
    droppedBy:['turtle'] },

  { id:'scute', name:'Scute', img:'items/turtle_scute.png', emoji:'ğŸ¢', category:'rare',
    desc:'Dropped by baby turtles when they grow up. 5 scutes craft a Turtle Shell helmet that grants Water Breathing.',
    usedFor:['Turtle Shell Helmet','Potion of the Turtle Master'],
    usedForIds:['turtle_shell',''],
    craftedFrom:[],
    droppedBy:['turtle'] },

  { id:'bamboo', name:'Bamboo', img:'items/bamboo.png', emoji:'ğŸ‹', category:'material',
    desc:'Dropped by pandas and found in Jungle biomes. Used to craft scaffolding, bamboo planks, and as fuel. Also used to breed pandas.',
    usedFor:['Scaffolding','Bamboo Planks','Bamboo Raft'],
    craftedFrom:[],
    droppedBy:['panda'] },

  { id:'slimeball', name:'Slimeball', img:'items/slimeball.png', emoji:'ğŸŸ©', category:'material',
    desc:'Dropped by Slimes and rarely by pandas. Essential for crafting sticky pistons, leads, slime blocks, and magma cream.',
    usedFor:['Sticky Piston','Lead','Slime Block','Magma Cream'],
    usedForIds:['sticky_piston','lead','','magma_cream'],
    craftedFrom:[],
    droppedBy:['slime','panda'] },

  { id:'tropical_fish', name:'Tropical Fish', img:'items/tropical_fish.png', emoji:'ğŸ ', category:'food',
    desc:'Dropped by tropical fish mobs. Restores minimal hunger but can be used to tame axolotls.',
    usedFor:['Taming Axolotl'],
    craftedFrom:[],
    droppedBy:['tropical_fish'] },

  { id:'raw_cod', name:'Raw Cod', img:'items/cod.png', emoji:'ğŸŸ', category:'food',
    desc:'Dropped by cod, guardians, dolphins, and polar bears. Cooked into Cooked Cod. Used to tame cats and dolphins.',
    usedFor:['Cooked Cod','Taming Cats','Taming Dolphins'],
    craftedFrom:[],
    droppedBy:['cod','dolphin','polar_bear','guardian','elder_guardian'] },

  { id:'raw_salmon', name:'Raw Salmon', img:'items/salmon.png', emoji:'ğŸŸ', category:'food',
    desc:'Dropped by salmon and polar bears. Cooks into Cooked Salmon, which restores more hunger than Cooked Cod.',
    usedFor:['Cooked Salmon','Taming Cats'],
    craftedFrom:[],
    droppedBy:['salmon','polar_bear'] },

  { id:'pufferfish', name:'Pufferfish', img:'items/pufferfish.png', emoji:'ğŸ¡', category:'material',
    desc:'Dropped by pufferfish mobs. Essential for brewing Potions of Water Breathing.',
    usedFor:['Potion of Water Breathing'],
    usedForIds:['potion_of_water_breathing'],
    craftedFrom:[],
    droppedBy:['pufferfish'] },

  { id:'bone_meal', name:'Bone Meal', img:'items/bone_meal.png', emoji:'âšª', category:'material',
    desc:'Obtained from bones (crafted) or rarely from fish. Used as fertilizer to speed plant growth and make white dye.',
    usedFor:['Fertilizer','White Dye'],
    craftedFrom:[{itemId:'bone',qty:1}],
    droppedBy:['tropical_fish','cod','salmon'] },

  { id:'goat_horn', name:'Goat Horn', img:'items/goat_horn.png', emoji:'ğŸ“¯', category:'rare',
    desc:'Obtained when goats ram into hard blocks. Comes in 8 sound variants. Plays a raid horn sound.',
    usedFor:['Horn Sound (decorative/signaling)'],
    craftedFrom:[],
    droppedBy:['goat'] },

  { id:'armadillo_scute', name:'Armadillo Scute', img:'items/armadillo_scute.png', emoji:'ğŸª²', category:'material',
    desc:'Dropped periodically by armadillos. Used to craft Wolf Armor, giving tamed wolves protection.',
    usedFor:['Wolf Armor'],
    usedForIds:['wolf_armor'],
    craftedFrom:[],
    droppedBy:['armadillo'] },

  { id:'ender_pearl', name:'Ender Pearl', img:'items/ender_pearl.png', emoji:'ğŸŸ£', category:'combat',
    desc:'Dropped by Endermen. Throw to teleport to the landing location. Combined with Blaze Powder to craft an Eye of Ender, required to locate and activate the End Portal.',
    usedFor:['Eye of Ender','Teleportation'],
    usedForIds:['eye_of_ender','teleportation'],
    craftedFrom:[],
    droppedBy:['enderman'] },

  { id:'gold_nugget', name:'Gold Nugget', img:'items/gold_nugget.png', emoji:'ğŸŸ¡', category:'material',
    desc:'Dropped by Zombified Piglins and Piglins. 9 gold nuggets craft into a Gold Ingot.',
    usedFor:['Gold Ingot (9 nuggets)','Glistering Melon'],
    craftedFrom:[],
    droppedBy:['zombified_piglin','piglin'] },

  { id:'rotten_flesh', name:'Rotten Flesh', img:'items/rotten_flesh.png', emoji:'ğŸŸ«', category:'food',
    desc:'Dropped by zombies, drowned, husks, and zoglins. Eating it has an 80% chance of inflicting Hunger. Useful as wolf food in emergencies.',
    usedFor:['Wolf Healing (desperate)'],
    craftedFrom:[],
    droppedBy:['zombie','drowned','husk','zoglin','zombified_piglin'] },

  { id:'spider_eye', name:'Spider Eye', img:'items/spider_eye.png', emoji:'ğŸ•·ï¸', category:'material',
    desc:'Dropped by spiders, cave spiders, and witches. Used to brew Potions of Poison. Combined with sugar and mushroom to craft Fermented Spider Eye.',
    usedFor:['Potion of Poison','Fermented Spider Eye'],
    usedForIds:['potion_of_poison','fermented_spider_eye'],
    craftedFrom:[],
    droppedBy:['spider','cave_spider','witch'] },

  { id:'bone', name:'Bone', img:'items/bone.png', emoji:'ğŸ¦´', category:'material',
    desc:'Dropped by skeletons, strays, and bogged. Crafts into Bone Meal (3 per bone). Also used to tame wolves.',
    usedFor:['Bone Meal','Taming Wolves'],
    craftedFrom:[],
    droppedBy:['skeleton','stray','bogged'] },

  { id:'arrow', name:'Arrow', img:'items/arrow.png', emoji:'â¡ï¸', category:'combat',
    desc:'Dropped by skeletons and pillagers. Crafted from flint, stick, and feather. Used as ammunition for bows and crossbows.',
    usedFor:['Bow Ammo','Crossbow Ammo'],
    craftedFrom:[{itemId:'feather',qty:1},{itemId:'flint',qty:1}],
    droppedBy:['skeleton','stray','pillager'] },

  { id:'bow', name:'Bow', img:'items/bow.png', emoji:'ğŸ¹', category:'combat',
    desc:'Rarely dropped by skeletons. Crafted from sticks and string. The primary ranged weapon for most of the game.',
    usedFor:['Ranged Combat','Arrow Firing'],
    craftedFrom:[{itemId:'string',qty:3}],
    droppedBy:['skeleton'] },

  { id:'gunpowder', name:'Gunpowder', img:'items/gunpowder.png', emoji:'ğŸ’¥', category:'material',
    desc:'Dropped by Creepers, Ghasts, and Witches. Used to craft TNT, Fire Charges, and Firework Rockets.',
    usedFor:['TNT','Fire Charge','Firework Rocket'],
    usedForIds:['tnt','fire_charge','firework_rocket'],
    craftedFrom:[],
    droppedBy:['creeper','ghast','witch'] },

  { id:'glowstone_dust', name:'Glowstone Dust', img:'items/glowstone_dust.png', emoji:'âœ¨', category:'material',
    desc:'Dropped by Witches. Found in Glowstone blocks in the Nether. Used to amplify potions and craft Glowstone blocks.',
    usedFor:['Potion Amplification','Glowstone Block','Spectral Arrow'],
    usedForIds:['','','spectral_arrow'],
    craftedFrom:[],
    droppedBy:['witch'] },

  { id:'sugar', name:'Sugar', img:'items/sugar.png', emoji:'ğŸ¬', category:'material',
    desc:'Dropped by Witches. Crafted from Sugar Cane. Used in cakes, pies, and Potions of Swiftness.',
    usedFor:['Cake','Pumpkin Pie','Potion of Swiftness','Fermented Spider Eye'],
    craftedFrom:[],
    droppedBy:['witch'] },

  { id:'redstone', name:'Redstone', img:'items/redstone.png', emoji:'ğŸ”´', category:'material',
    desc:'Dropped by Witches. Mined from Redstone Ore. The lifeblood of Minecraft automation and complex machines.',
    usedFor:['Redstone Circuits','Potion Duration Extension','Various Crafting'],
    craftedFrom:[],
    droppedBy:['witch'] },

  { id:'stick', name:'Stick', img:'items/stick.png', emoji:'ğŸªµ', category:'material',
    desc:'Dropped by Witches. Crafted from wooden planks. The most basic crafting ingredient for tools, weapons, and torches.',
    usedFor:['Wooden Tools','Torches','Bow','Arrow'],
    craftedFrom:[],
    droppedBy:['witch'] },

  { id:'glass_bottle', name:'Glass Bottle', img:'items/glass_bottle.png', emoji:'ğŸ¶', category:'material',
    desc:'Dropped by Witches. Crafted from glass. Used to hold water and potions.',
    usedFor:['Water Bottle','Potions'],
    craftedFrom:[],
    droppedBy:['witch'] },

  { id:'potion', name:'Potion', img:'items/potion.png', emoji:'ğŸ§ª', category:'combat',
    desc:'Thrown by Witches. Various potions have different effects. Crafted with a Brewing Stand and various ingredients.',
    usedFor:['Various Effects'],
    craftedFrom:[],
    droppedBy:['witch'] },

  { id:'magma_cream', name:'Magma Cream', img:'items/magma_cream.png', emoji:'ğŸ”¶', category:'material',
    desc:'Dropped by Magma Cubes. Essential for brewing Fire Resistance potions. Can also be crafted from Slimeball + Blaze Powder.',
    usedFor:['Potion of Fire Resistance'],
    usedForIds:['potion_of_fire_resistance'],
    craftedFrom:[{itemId:'slimeball',qty:1},{itemId:'blaze_powder',qty:1}],
    droppedBy:['magma_cube'] },

  { id:'blaze_rod', name:'Blaze Rod', img:'items/blaze_rod.png', emoji:'ğŸ”¥', category:'rare',
    desc:'Dropped by Blazes. Powers Brewing Stands. Combined with Ender Pearls to craft Eyes of Ender to locate and enter The End.',
    usedFor:['Brewing Stand','Eye of Ender','Blaze Powder','Fire Charge'],
    usedForIds:['','eye_of_ender','','fire_charge'],
    craftedFrom:[],
    droppedBy:['blaze'] },

  { id:'blaze_powder', name:'Blaze Powder', img:'items/blaze_powder.png', emoji:'ğŸ”¥', category:'material',
    desc:'Crafted from Blaze Rods (2 per rod). Used to fuel Brewing Stands and craft Eyes of Ender and Fire Charges.',
    usedFor:['Eye of Ender','Brewing Stand Fuel','Magma Cream','Fire Charge'],
    craftedFrom:[{itemId:'blaze_rod',qty:1}],
    droppedBy:[] },

  { id:'ghast_tear', name:'Ghast Tear', img:'items/ghast_tear.png', emoji:'ğŸ’§', category:'rare',
    desc:'Dropped by Ghasts. Used in brewing Potions of Regeneration. One of the harder Nether items to obtain due to the Ghast spawning over lava.',
    usedFor:['Potion of Regeneration','End Crystal'],
    usedForIds:['potion_of_regeneration',''],
    craftedFrom:[],
    droppedBy:['ghast'] },

  { id:'copper_ingot', name:'Copper Ingot', img:'items/copper_ingot.png', emoji:'ğŸŸ§', category:'material',
    desc:'Rarely dropped by Drowned. Smelted from Copper Ore. Used to craft Copper blocks, Spyglass, and Lightning Rods.',
    usedFor:['Copper Block','Spyglass','Lightning Rod'],
    craftedFrom:[],
    droppedBy:['drowned'] },

  { id:'trident', name:'Trident', img:'items/trident.png', emoji:'ğŸ”±', category:'combat',
    desc:'Rarely carried and dropped by Drowned (8.5% chance). Cannot be crafted. A powerful weapon usable in melee or thrown at enemies. Can be enchanted with Riptide, Loyalty, Channeling, and Impaling.',
    usedFor:['Melee Combat','Ranged Combat','Riptide Flight'],
    craftedFrom:[],
    droppedBy:['drowned'] },

  { id:'sand', name:'Sand', img:'items/sand.png', emoji:'ğŸŸ¡', category:'material',
    desc:'Occasionally dropped by Husks. Found in deserts and beaches. Used to craft glass, sandstone, and TNT.',
    usedFor:['Glass','Sandstone','TNT'],
    craftedFrom:[],
    droppedBy:['husk'] },

  { id:'arrow_of_slowness', name:'Arrow of Slowness', img:'items/tipped_arrow.png', emoji:'â„ï¸', category:'combat',
    desc:'Dropped by Strays. Inflicts the Slowness effect on hit targets, slowing their movement speed.',
    usedFor:['Ranged Slowness'],
    craftedFrom:[],
    droppedBy:['stray'] },

  { id:'phantom_membrane', name:'Phantom Membrane', img:'items/phantom_membrane.png', emoji:'ğŸ¦‡', category:'rare',
    desc:'Dropped by Phantoms. Used to repair Elytra and brew Potions of Slow Falling.',
    usedFor:['Elytra Repair','Potion of Slow Falling'],
    usedForIds:['elytra','potion_of_slow_falling'],
    craftedFrom:[],
    droppedBy:['phantom'] },

  { id:'emerald', name:'Emerald', img:'items/emerald.png', emoji:'ğŸ’š', category:'rare',
    desc:'Dropped by Vindicators and Evokers. The Villager trading currency. Mined from Emerald Ore in mountain biomes.',
    usedFor:['Villager Trading','Beacon Payment','Decorative Block'],
    craftedFrom:[],
    droppedBy:['vindicator','evoker','pillager'] },

  { id:'iron_axe', name:'Iron Axe', img:'items/iron_axe.png', emoji:'ğŸª“', category:'combat',
    desc:'Rarely dropped by Vindicators. Crafted from iron ingots and sticks. Deals high damage, especially critical hits.',
    usedFor:['Melee Combat','Wood Chopping'],
    craftedFrom:[],
    droppedBy:['vindicator'] },

  { id:'totem_of_undying', name:'Totem of Undying', img:'items/totem_of_undying.png', emoji:'ğŸª„', category:'rare',
    desc:'Exclusively dropped by Evokers. When held in either hand, prevents death once â€” absorbing lethal damage and restoring some health.',
    usedFor:['Death Prevention'],
    craftedFrom:[],
    droppedBy:['evoker'] },

  { id:'crossbow', name:'Crossbow', img:'items/crossbow.png', emoji:'ğŸ¹', category:'combat',
    desc:'Rarely dropped by Pillagers. Pre-loaded with ammunition. Can be loaded with arrows, firework rockets, or via Multishot enchantment.',
    usedFor:['Ranged Combat','Firework Launching'],
    craftedFrom:[],
    droppedBy:['pillager'] },

  { id:'saddle', name:'Saddle', img:'items/saddle.png', emoji:'ğŸ', category:'rare',
    desc:'Dropped by Ravagers. Found in chests throughout the world. Used to ride horses, pigs, donkeys, mules, striders, and camels.',
    usedFor:['Riding Horses','Riding Pigs','Riding Striders','Riding Camels'],
    craftedFrom:[],
    droppedBy:['ravager'] },

  { id:'prismarine_shard', name:'Prismarine Shard', img:'items/prismarine_shard.png', emoji:'ğŸ”µ', category:'material',
    desc:'Dropped by Guardians and Elder Guardians. Used to craft Prismarine blocks, Sea Lanterns, and Prismarine bricks.',
    usedFor:['Prismarine Block','Sea Lantern','Prismarine Bricks'],
    usedForIds:['','sea_lantern',''],
    craftedFrom:[],
    droppedBy:['guardian','elder_guardian'] },

  { id:'prismarine_crystal', name:'Prismarine Crystal', img:'items/prismarine_crystals.png', emoji:'ğŸ’', category:'material',
    desc:'Dropped by Guardians. Used to craft Sea Lanterns (the brightest light source).',
    usedFor:['Sea Lantern'],
    usedForIds:['sea_lantern'],
    craftedFrom:[],
    droppedBy:['guardian'] },

  { id:'sponge', name:'Sponge', img:'items/sponge.png', emoji:'ğŸŸ¨', category:'rare',
    desc:'Dropped by Elder Guardians. Can absorb water in a 7Ã—7 area. Essential for draining Ocean Monuments.',
    usedFor:['Water Absorption','Monument Draining'],
    craftedFrom:[],
    droppedBy:['elder_guardian'] },

  { id:'shulker_shell', name:'Shulker Shell', img:'items/shulker_shell.png', emoji:'ğŸŸª', category:'rare',
    desc:'Dropped by Shulkers. Two Shulker Shells craft a Shulker Box â€” a portable chest that keeps its contents when broken. Invaluable for end-game item management.',
    usedFor:['Shulker Box'],
    usedForIds:['shulker_box'],
    craftedFrom:[],
    droppedBy:['shulker'] },

  { id:'sculk_catalyst', name:'Sculk Catalyst', img:'items/sculk_catalyst.png', emoji:'ğŸ’€', category:'rare',
    desc:'Dropped by the Warden. Placed in the world, it converts nearby blocks to Sculk when mobs die close to it â€” useful for XP farms.',
    usedFor:['Sculk Generation','XP Farms'],
    craftedFrom:[],
    droppedBy:['warden'] },

  { id:'breeze_rod', name:'Breeze Rod', img:'items/breeze_rod.png', emoji:'ğŸ’¨', category:'rare',
    desc:'Dropped by Breezes. Used to craft the Mace â€” a powerful new weapon â€” and Wind Charges.',
    usedFor:['Mace Weapon','Wind Charge'],
    usedForIds:['mace','wind_charge'],
    craftedFrom:[],
    droppedBy:['breeze'] },

  { id:'mushroom', name:'Mushroom', img:'items/red_mushroom.png', emoji:'ğŸ„', category:'material',
    desc:'Dropped by Bogged skeletons and Mooshrooms (when sheared). Found in dark areas and Mushroom Fields. Used in Mushroom Stew and Suspicious Stew.',
    usedFor:['Mushroom Stew','Suspicious Stew','Fermented Spider Eye'],
    craftedFrom:[],
    droppedBy:['bogged','mooshroom'] },

  { id:'arrow_of_poison', name:'Arrow of Poison', img:'items/tipped_arrow.png', emoji:'ğŸ„', category:'combat',
    desc:'Dropped by Bogged skeletons. Inflicts the Poison effect on hit targets. Crafted by combining lingering poison potion with arrows.',
    usedFor:['Ranged Poison'],
    craftedFrom:[],
    droppedBy:['bogged'] },

  { id:'dragon_egg', name:'Dragon Egg', img:'items/dragon_egg.png', emoji:'ğŸ‰', category:'rare',
    desc:'Dropped by the Ender Dragon on first kill only. A purely decorative, gravity-affected block that teleports when broken directly.',
    usedFor:['Decoration','Trophy'],
    craftedFrom:[],
    droppedBy:['ender_dragon'] },

  { id:'nether_star', name:'Nether Star', img:'items/nether_star.png', emoji:'â­', category:'rare',
    desc:'Dropped by the Wither. Used to craft a Beacon â€” the most powerful utility block in the game, providing area-wide status effects.',
    usedFor:['Beacon'],
    craftedFrom:[],
    droppedBy:['wither'] },

  { id:'music_disc', name:'Music Disc', img:'items/music_disc_13.png', emoji:'ğŸ’¿', category:'rare',
    desc:'Dropped by Creepers when killed by a Skeleton. 15 different music discs exist, each playing a unique track when inserted into a Jukebox.',
    usedFor:['Jukebox Playback'],
    craftedFrom:[],
    droppedBy:['creeper'] },

  { id:'gold_sword', name:'Gold Sword', img:'items/golden_sword.png', emoji:'âš”ï¸', category:'combat',
    desc:'Rarely dropped by Zombified Piglins. Crafted from gold ingots and sticks. Fast attack speed but low durability.',
    usedFor:['Melee Combat'],
    craftedFrom:[],
    droppedBy:['zombified_piglin'] },

  { id:'iron_ingot', name:'Iron Ingot', img:'items/iron_ingot.png', emoji:'â¬œ', category:'material',
    desc:'Rarely dropped by Zombies. Smelted from Iron Ore. The backbone of Minecraft crafting â€” tools, armor, rails, buckets, etc.',
    usedFor:['Iron Tools','Iron Armor','Rails','Buckets','Compass'],
    craftedFrom:[],
    droppedBy:['zombie'] },

  { id:'carrot', name:'Carrot', img:'items/carrot.png', emoji:'ğŸ¥•', category:'food',
    desc:'Rarely dropped by Zombies. Found in village farms. Used to breed pigs and rabbits, craft Carrot on a Stick, and grow more carrots.',
    usedFor:['Pig/Rabbit Breeding','Carrot on a Stick','Golden Carrot'],
    craftedFrom:[],
    droppedBy:['zombie'] },

  { id:'potato', name:'Potato', img:'items/potato.png', emoji:'ğŸ¥”', category:'food',
    desc:'Rarely dropped by Zombies. Found in village farms. Cooks into Baked Potato, one of the most filling foods. Can rarely appear as a Poisonous Potato.',
    usedFor:['Baked Potato','Pig/Rabbit Breeding'],
    craftedFrom:[],
    droppedBy:['zombie'] },

  { id:'gold_ingot', name:'Gold Ingot', img:'items/gold_ingot.png', emoji:'ğŸŸ¡', category:'material',
    desc:'Rarely dropped by Zombified Piglins (in golden form). Smelted from Gold Ore or crafted from 9 Gold Nuggets. Used for golden tools, powered rails, clocks, and Nether Portal frames. Also accepted by Piglins as trade currency.',
    usedFor:['Golden Tools','Powered Rail','Clock','Piglin Bartering','Nether Portal Frames'],
    craftedFrom:[{itemId:'gold_nugget',qty:9}],
    droppedBy:['zombified_piglin'] },

  { id:'eye_of_ender', name:'Eye of Ender', img:'items/eye_of_ender.png', emoji:'ğŸŸ£', category:'rare',
    desc:'Crafted from an Ender Pearl and Blaze Powder. Thrown to locate the nearest Stronghold, slowly flying in that direction. 12 Eyes of Ender are needed to activate the End Portal hidden in the Stronghold.',
    usedFor:['End Portal Activation','Stronghold Navigation'],
    craftedFrom:[{itemId:'ender_pearl',qty:1},{itemId:'blaze_powder',qty:1}],
    droppedBy:[] },

  { id:'fermented_spider_eye', name:'Fermented Spider Eye', img:'items/fermented_spider_eye.png', emoji:'ğŸ•·ï¸', category:'material',
    desc:'Crafted from a Spider Eye, Sugar, and Brown Mushroom. Used as a base ingredient for many negative-effect potions â€” it corrupts existing potions into their harmful counterparts (Potion of Weakness, Harming, Blindness, Slowness).',
    usedFor:['Potion of Weakness','Potion of Harming','Potion of Blindness','Potion of Slowness'],
    craftedFrom:[{itemId:'spider_eye',qty:1},{itemId:'sugar',qty:1},{itemId:'mushroom',qty:1}],
    droppedBy:[] },

  { id:'shulker_box', name:'Shulker Box', img:'items/shulker_box.png', emoji:'ğŸŸª', category:'rare',
    desc:'Crafted from 2 Shulker Shells and a Chest. The most valuable storage item in the game â€” keeps its contents when broken, making it a portable chest. Essential for End exploration and item transport. Comes in 16 colors.',
    usedFor:['Portable Storage','Item Transport','End Looting'],
    craftedFrom:[{itemId:'shulker_shell',qty:2}],
    droppedBy:[] },

  { id:'beacon', name:'Beacon', img:'items/beacon.png', emoji:'â­', category:'rare',
    desc:'Crafted from a Nether Star, 3 Obsidian, and 5 Glass. The most powerful utility block in the game â€” emits a beam of light and grants area-wide status effects (Speed, Haste, Resistance, Jump Boost, Strength, Regeneration) to nearby players.',
    usedFor:['Area Status Effects','Haste/Speed/Strength Aura','Base Defense'],
    craftedFrom:[{itemId:'nether_star',qty:1},{itemId:'obsidian',qty:3},{itemId:'glass',qty:5}],
    droppedBy:[] },

  // â”€â”€ COOKED FOODS â”€â”€
  { id:'steak', name:'Steak', img:'items/steak.png', emoji:'ğŸ¥©', category:'food',
    desc:'Cooked beef. Restores 8 hunger â€” one of the best food items.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'raw_beef',qty:1,method:'smelt'}], droppedBy:['cow','mooshroom'] },
  { id:'cooked_porkchop', name:'Cooked Porkchop', img:'items/cooked_porkchop.png', emoji:'ğŸ–', category:'food',
    desc:'Cooked pork. Restores 8 hunger.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'raw_porkchop',qty:1,method:'smelt'}], droppedBy:['pig','hoglin'] },
  { id:'cooked_chicken', name:'Cooked Chicken', img:'items/cooked_chicken.png', emoji:'ğŸ—', category:'food',
    desc:'Cooked chicken. Restores 6 hunger.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'raw_chicken',qty:1,method:'smelt'}], droppedBy:['chicken'] },
  { id:'cooked_mutton', name:'Cooked Mutton', img:'items/cooked_mutton.png', emoji:'ğŸ–', category:'food',
    desc:'Cooked mutton. Restores 6 hunger.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'raw_mutton',qty:1,method:'smelt'}], droppedBy:['sheep'] },
  { id:'cooked_rabbit', name:'Cooked Rabbit', img:'items/cooked_rabbit.png', emoji:'ğŸ–', category:'food',
    desc:'Cooked rabbit. Restores 5 hunger. Ingredient in Rabbit Stew.', usedFor:['Rabbit Stew'], usedForIds:['rabbit_stew'],
    craftedFrom:[{itemId:'raw_rabbit',qty:1,method:'smelt'}], droppedBy:['rabbit'] },
  { id:'cooked_cod', name:'Cooked Cod', img:'items/cooked_cod.png', emoji:'ğŸŸ', category:'food',
    desc:'Cooked cod. Restores 5 hunger.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'raw_cod',qty:1,method:'smelt'}], droppedBy:['cod','guardian'] },
  { id:'cooked_salmon', name:'Cooked Salmon', img:'items/cooked_salmon.png', emoji:'ğŸŸ', category:'food',
    desc:'Cooked salmon. Restores 6 hunger â€” better than cod.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'raw_salmon',qty:1,method:'smelt'}], droppedBy:['salmon'] },
  { id:'rabbit_stew', name:'Rabbit Stew', img:'items/rabbit_stew.png', emoji:'ğŸ²', category:'food',
    desc:'The most filling food in Minecraft, restoring 10 hunger.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'cooked_rabbit',qty:1},{itemId:'carrot',qty:1},{itemId:'potato',qty:1}], droppedBy:[] },

  // â”€â”€ CRAFTED ITEMS â”€â”€
  { id:'tnt', name:'TNT', img:'items/tnt.png', emoji:'ğŸ’£', category:'combat',
    desc:'Explodes after being primed. Used for mining and combat.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'gunpowder',qty:5},{itemId:'sand',qty:4}], droppedBy:[] },
  { id:'leather_armor', name:'Leather Armor', img:'items/leather_armor.png', emoji:'ğŸ§¥', category:'combat',
    desc:'Basic armor set crafted from leather. Can be dyed any color.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'leather',qty:7}], droppedBy:[] },
  { id:'book', name:'Book', img:'items/book.png', emoji:'ğŸ“–', category:'material',
    desc:'Used to craft bookshelves, enchanting tables, and Book and Quill.', usedFor:['Bookshelf','Enchanting Table','Book and Quill'], usedForIds:['bookshelf','','book_and_quill'],
    craftedFrom:[{itemId:'leather',qty:1}], droppedBy:[] },
  { id:'book_and_quill', name:'Book and Quill', img:'items/book_and_quill.png', emoji:'ğŸ“', category:'material',
    desc:'A writable book. Signed copies can be published and shared.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'book',qty:1},{itemId:'ink_sac',qty:1},{itemId:'feather',qty:1}], droppedBy:[] },

  { id:'bookshelf', name:'Bookshelf', img:'items/bookshelf.png', emoji:'ğŸ“š', category:'material',
    desc:'Used for decoration and to power nearby Enchanting Tables. Crafted from books and wooden planks.', usedFor:['Enchanting Table Boost'], usedForIds:[''],
    craftedFrom:[{itemId:'book',qty:3}], droppedBy:[] },

  { id:'spectral_arrow', name:'Spectral Arrow', img:'items/spectral_arrow.png', emoji:'âœ¨', category:'combat',
    desc:'An arrow that outlines hit targets with a glowing effect, making them visible through blocks for a short time.', usedFor:['Ranged Combat'], usedForIds:['ranged_combat'],
    craftedFrom:[{itemId:'arrow',qty:1},{itemId:'glowstone_dust',qty:1}], droppedBy:[] },
  { id:'bed', name:'Bed', img:'items/bed.png', emoji:'ğŸ›ï¸', category:'material',
    desc:'Set your spawn point and skip the night. Explodes in the Nether and End.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'wool',qty:3}], droppedBy:[] },
  { id:'lead', name:'Lead', img:'items/lead.png', emoji:'ğŸª¢', category:'material',
    desc:'Leash for mobs. Also used to tie mobs to fences.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'string',qty:4},{itemId:'slimeball',qty:1}], droppedBy:[] },
  { id:'sticky_piston', name:'Sticky Piston', img:'items/sticky_piston.png', emoji:'â¬œ', category:'material',
    desc:'A piston that pulls blocks back when retracted. Essential for redstone contraptions.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'slimeball',qty:1}], droppedBy:[] },
  { id:'fire_charge', name:'Fire Charge', img:'items/fire_charge.png', emoji:'ğŸ”¥', category:'combat',
    desc:'Acts like a ghast fireball. Can light portals and campfires.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'gunpowder',qty:1},{itemId:'blaze_rod',qty:1}], droppedBy:[] },
  { id:'firework_rocket', name:'Firework Rocket', img:'items/firework_rocket.png', emoji:'ğŸ†', category:'material',
    desc:'Used for Elytra propulsion and celebrations.', usedFor:['Elytra Boost'], usedForIds:[],
    craftedFrom:[{itemId:'gunpowder',qty:1}], droppedBy:[] },
  { id:'glow_item_frame', name:'Glow Item Frame', img:'items/glow_item_frame.png', emoji:'ğŸ–¼ï¸', category:'material',
    desc:'An item frame that glows in the dark. Made with Glow Ink Sac.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'glow_ink_sac',qty:1}], droppedBy:[] },
  { id:'sea_lantern', name:'Sea Lantern', img:'items/sea_lantern.png', emoji:'ğŸ’¡', category:'material',
    desc:'A bright underwater light source found in Ocean Monuments.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'prismarine_crystal',qty:5},{itemId:'prismarine_shard',qty:4}], droppedBy:[] },
  { id:'turtle_shell', name:'Turtle Shell', img:'items/turtle_shell.png', emoji:'ğŸ¢', category:'combat',
    desc:'A helmet granting Water Breathing. Used to brew Potions of the Turtle Master.', usedFor:['Potion of the Turtle Master'], usedForIds:[],
    craftedFrom:[{itemId:'scute',qty:5}], droppedBy:[] },
  { id:'wolf_armor', name:'Wolf Armor', img:'items/wolf_armor.png', emoji:'ğŸº', category:'combat',
    desc:'Armor for tamed wolves crafted from Armadillo Scutes.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'armadillo_scute',qty:6}], droppedBy:[] },
  { id:'wind_charge', name:'Wind Charge', img:'items/wind_charge.png', emoji:'ğŸ’¨', category:'combat',
    desc:'A throwable projectile that knocks back entities and interacts with redstone.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'breeze_rod',qty:1}], droppedBy:['breeze'] },
  { id:'mace', name:'Mace', img:'items/mace.png', emoji:'ğŸ”¨', category:'combat',
    desc:'A powerful new weapon that deals massive damage after falling. Uses Breeze Rods.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'breeze_rod',qty:1}], droppedBy:[] },
  { id:'elytra', name:'Elytra', img:'items/elytra.png', emoji:'ğŸª‚', category:'rare',
    desc:'Wings found in End Ships that allow gliding. Repaired with Phantom Membranes.', usedFor:[], usedForIds:[],
    craftedFrom:[], droppedBy:[] },

  // â”€â”€ POTIONS â”€â”€
  { id:'potion_of_regeneration', name:'Potion of Regeneration', img:'items/potion_of_regeneration.png', emoji:'ğŸ§ª', category:'material',
    desc:'Slowly restores health over time. Brewed with Ghast Tear.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'ghast_tear',qty:1}], droppedBy:[] },
  { id:'potion_of_fire_resistance', name:'Potion of Fire Resistance', img:'items/potion_of_fire_resistance.png', emoji:'ğŸ”¥', category:'material',
    desc:'Grants immunity to fire and lava. Essential for Nether exploration.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'magma_cream',qty:1}], droppedBy:[] },
  { id:'potion_of_leaping', name:'Potion of Leaping', img:'items/potion_of_leaping.png', emoji:'ğŸ‡', category:'material',
    desc:"Increases jump height. Brewed with Rabbit's Foot.", usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'rabbits_foot',qty:1}], droppedBy:[] },
  { id:'potion_of_water_breathing', name:'Potion of Water Breathing', img:'items/potion_of_water_breathing.png', emoji:'ğŸ«§', category:'material',
    desc:'Allows breathing underwater. Brewed with Pufferfish.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'pufferfish',qty:1}], droppedBy:[] },
  { id:'potion_of_poison', name:'Potion of Poison', img:'items/potion_of_poison.png', emoji:'â˜ ï¸', category:'combat',
    desc:'Inflicts poison damage. Brewed with Spider Eye.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'spider_eye',qty:1}], droppedBy:[] },
  { id:'potion_of_slow_falling', name:'Potion of Slow Falling', img:'items/potion_of_slow_falling.png', emoji:'ğŸƒ', category:'material',
    desc:'Slows falling speed and negates fall damage. Brewed with Phantom Membrane.', usedFor:[], usedForIds:[],
    craftedFrom:[{itemId:'phantom_membrane',qty:1}], droppedBy:[] },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOCATIONS DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const LOCATIONS = [
  // OVERWORLD
  { id:'plains', name:'Plains', dimension:'overworld', emoji:'ğŸŒ¾',
    theme:{ bgColor:'#0d1a0d', bgGradient:'radial-gradient(ellipse at top, #142014 0%, #0d1a0d 70%)', accentColor:'#4caf50', cardBg:'#121a12' },
    desc:'Flat, grassy biomes that are the most common biome in Minecraft. Villages and pillager outposts are common here. Easy to build and farm in.',
    structures:['Village','Pillager Outpost','Ruined Portal'],
    mobs:['cow','pig','sheep','chicken','horse','donkey','zombie','skeleton','creeper','spider','pillager'],
    resources:['Grass','Dirt','Gravel','Oak Log'] },

  { id:'forest', name:'Forest', dimension:'overworld', emoji:'ğŸŒ²',
    theme:{ bgColor:'#0a130a', bgGradient:'radial-gradient(ellipse at top, #0d1a0d 0%, #0a130a 70%)', accentColor:'#66bb6a', cardBg:'#0f160f' },
    desc:'Dense oak and birch forests that provide abundant wood. Wolves sometimes roam here. A common early-game biome for wood collection.',
    structures:['Ruined Portal'],
    mobs:['cow','sheep','chicken','pig','wolf','spider'],
    resources:['Oak Log','Birch Log','Mushroom','Grass'] },

  { id:'dark_forest', name:'Dark Forest', dimension:'overworld', emoji:'ğŸŒ‘',
    theme:{ bgColor:'#060d06', bgGradient:'radial-gradient(ellipse at top, #0a140a 0%, #060d06 70%)', accentColor:'#2e7d32', cardBg:'#0a0f0a' },
    desc:'An eerie, shadowy biome where the dense canopy blocks sunlight, allowing hostile mobs to spawn even during the day. Home to the Woodland Mansion.',
    structures:['Woodland Mansion'],
    mobs:['vindicator','evoker','vex','wolf','spider'],
    resources:['Dark Oak Log','Red Mushroom','Brown Mushroom','Mushroom'] },

  { id:'jungle', name:'Jungle', dimension:'overworld', emoji:'ğŸŒ´',
    theme:{ bgColor:'#091a09', bgGradient:'radial-gradient(ellipse at top, #0d2010 0%, #091a09 70%)', accentColor:'#66bb6a', cardBg:'#0c1a0c' },
    desc:'Lush, dense tropical forests filled with vines, melons, cocoa pods, and temples. Home to parrots, ocelots, and pandas.',
    structures:['Jungle Temple','Ruined Portal'],
    mobs:['parrot','panda','ocelot','spider'],
    resources:['Jungle Log','Bamboo','Melon','Cocoa Beans','Vine'] },

  { id:'desert', name:'Desert', dimension:'overworld', emoji:'ğŸœï¸',
    theme:{ bgColor:'#1a1200', bgGradient:'radial-gradient(ellipse at top, #1a1500 0%, #1a1200 70%)', accentColor:'#ffc107', cardBg:'#1a1400' },
    desc:'Vast sandy biomes with cacti and dead bushes. Home to Desert Temples and Villages. Husks spawn here instead of regular zombies.',
    structures:['Desert Temple','Desert Village','Desert Well','Ruined Portal'],
    mobs:['rabbit','husk','camel'],
    resources:['Sand','Sandstone','Cactus','Dead Bush','Cactus Green'] },

  { id:'swamp', name:'Swamp', dimension:'overworld', emoji:'ğŸ¸',
    theme:{ bgColor:'#0a1208', bgGradient:'radial-gradient(ellipse at top, #0f1a0a 0%, #0a1208 70%)', accentColor:'#558b2f', cardBg:'#0d1a0c' },
    desc:'Murky, waterlogged biomes with large oak trees draped in vines. Home to witch huts, slimes, and frogs.',
    structures:['Swamp Hut (Witch Hut)'],
    mobs:['cat','frog','tadpole','slime','witch','spider'],
    resources:['Oak Log','Vine','Lily Pad','Blue Orchid','Clay'] },

  { id:'mangrove_swamp', name:'Mangrove Swamp', dimension:'overworld', emoji:'ğŸŒŠ',
    theme:{ bgColor:'#081208', bgGradient:'radial-gradient(ellipse at top, #0d1a0a 0%, #081208 70%)', accentColor:'#388e3c', cardBg:'#0c1a0c' },
    desc:'A newer swamp variant with mangrove trees growing from warm, murky water. Mud blocks are abundant here.',
    structures:[],
    mobs:['frog','tadpole','bee','bogged'],
    resources:['Mangrove Log','Mangrove Roots','Mud','Propagule'] },

  { id:'taiga', name:'Taiga', dimension:'overworld', emoji:'ğŸŒ²',
    theme:{ bgColor:'#0d1214', bgGradient:'radial-gradient(ellipse at top, #111a1e 0%, #0d1214 70%)', accentColor:'#80cbc4', cardBg:'#111a1e' },
    desc:'Spruce forests with cold temperatures and abundant wolves. Sweet berries grow here. Villages and ferns are common.',
    structures:['Village','Pillager Outpost'],
    mobs:['wolf','fox','rabbit','chicken','cow','sheep'],
    resources:['Spruce Log','Fern','Sweet Berry Bush','Podzol'] },

  { id:'snowy_plains', name:'Snowy Plains', dimension:'overworld', emoji:'â„ï¸',
    theme:{ bgColor:'#0a0f14', bgGradient:'radial-gradient(ellipse at top, #10181f 0%, #0a0f14 70%)', accentColor:'#b3e5fc', cardBg:'#111a22' },
    desc:'Flat, snow-covered biomes with very few trees. Stray skeletons spawn here and polar bears roam the ice.',
    structures:['Igloo','Village'],
    mobs:['polar_bear','stray','rabbit','wolf'],
    resources:['Snow','Ice','Spruce Log','Powder Snow'] },

  { id:'ice_spikes', name:'Ice Spikes', dimension:'overworld', emoji:'ğŸ”ï¸',
    theme:{ bgColor:'#0a0f1a', bgGradient:'radial-gradient(ellipse at top, #0f1a2a 0%, #0a0f1a 70%)', accentColor:'#b3e5fc', cardBg:'#111a2a' },
    desc:'A rare and visually striking biome covered in towering spires of packed ice. Very few mobs spawn here.',
    structures:[],
    mobs:['polar_bear','stray','rabbit'],
    resources:['Packed Ice','Blue Ice','Snow','Ice'] },

  { id:'mountains', name:'Mountains', dimension:'overworld', emoji:'ğŸ”ï¸',
    theme:{ bgColor:'#111418', bgGradient:'radial-gradient(ellipse at top, #181d22 0%, #111418 70%)', accentColor:'#90a4ae', cardBg:'#181d22' },
    desc:'Tall, rugged peaks with snow and exposed stone. Home to goats and rare Emerald and Infested blocks. Several mountain sub-biomes exist.',
    structures:['Pillager Outpost','Ruined Portal'],
    mobs:['goat','silverfish','wolf'],
    resources:['Stone','Gravel','Emerald Ore','Infested Stone','Snow'] },

  { id:'meadow', name:'Meadow', dimension:'overworld', emoji:'ğŸŒ¸',
    theme:{ bgColor:'#0d1a0d', bgGradient:'radial-gradient(ellipse at top, #142014 0%, #0d1a0d 70%)', accentColor:'#a5d6a7', cardBg:'#121a12' },
    desc:'A peaceful, flower-filled biome found in the highlands near mountains. Full of colorful flowers and bees. A great location for building.',
    structures:['Ruined Portal'],
    mobs:['bee','rabbit','cow'],
    resources:['Grass','Various Flowers','Oak Log','Bee Nest'] },

  { id:'beach', name:'Beach', dimension:'overworld', emoji:'ğŸ–ï¸',
    theme:{ bgColor:'#0a1014', bgGradient:'radial-gradient(ellipse at top, #0d1a1a 0%, #0a1014 70%)', accentColor:'#80deea', cardBg:'#0f1a1a' },
    desc:'Sandy shores between oceans and land biomes. Turtles nest and lay eggs here. Buried treasure is often found under the sand.',
    structures:['Buried Treasure','Shipwreck'],
    mobs:['turtle','drowned'],
    resources:['Sand','Gravel','Kelp','Seagrass'] },

  { id:'ocean', name:'Ocean', dimension:'overworld', emoji:'ğŸŒŠ',
    theme:{ bgColor:'#000d1a', bgGradient:'radial-gradient(ellipse at top, #001428 0%, #000d1a 70%)', accentColor:'#2196f3', cardBg:'#001020' },
    desc:'Vast bodies of deep water covering much of the Minecraft world. Home to squids, fish, dolphins, and ocean monuments.',
    structures:['Ocean Monument','Shipwreck','Ocean Ruins','Buried Treasure'],
    mobs:['squid','cod','salmon','dolphin','drowned','guardian','elder_guardian'],
    resources:['Kelp','Seagrass','Clay','Gravel','Sand'] },

  { id:'warm_ocean', name:'Warm Ocean', dimension:'overworld', emoji:'ğŸ ',
    theme:{ bgColor:'#001020', bgGradient:'radial-gradient(ellipse at top, #001a2a 0%, #001020 70%)', accentColor:'#00b0ff', cardBg:'#001a28' },
    desc:'A shallow, warm ocean biome with coral reefs and colorful sea life. Tropical fish and pufferfish thrive here.',
    structures:['Ocean Ruins','Shipwreck'],
    mobs:['tropical_fish','pufferfish','squid'],
    resources:['Coral','Coral Block','Coral Fan','Sea Pickle','Sand'] },

  { id:'badlands', name:'Badlands', dimension:'overworld', emoji:'ğŸœï¸',
    theme:{ bgColor:'#1a0800', bgGradient:'radial-gradient(ellipse at top, #201200 0%, #1a0800 70%)', accentColor:'#ff8f00', cardBg:'#201000' },
    desc:'A rare, dry biome of multicolored terracotta mesas and dry canyons. Mineshafts often break the surface here. Gold Ore generates at all heights.',
    structures:['Mineshaft (surface)','Ruined Portal'],
    mobs:['armadillo'],
    resources:['Terracotta','Red Sand','Cactus','Gold Ore (all heights)','Dead Bush'] },

  { id:'savanna', name:'Savanna', dimension:'overworld', emoji:'ğŸŒ…',
    theme:{ bgColor:'#1a1500', bgGradient:'radial-gradient(ellipse at top, #201a00 0%, #1a1500 70%)', accentColor:'#ffd54f', cardBg:'#201800' },
    desc:'Flat, warm biomes with acacia trees and tall grass. Villages are common, and camels spawn in desert villages nearby.',
    structures:['Village','Pillager Outpost'],
    mobs:['armadillo','llama','horse','cow','pig','sheep'],
    resources:['Acacia Log','Tall Grass','Terracotta','Red Terracotta'] },

  { id:'mushroom_fields', name:'Mushroom Fields', dimension:'overworld', emoji:'ğŸ„',
    theme:{ bgColor:'#1a0a1a', bgGradient:'radial-gradient(ellipse at top, #201028 0%, #1a0a1a 70%)', accentColor:'#ce93d8', cardBg:'#1e1022' },
    desc:'One of the rarest biomes, made of Mycelium with giant mushrooms. The only biome where hostile mobs do not spawn naturally. Home to Mooshrooms.',
    structures:[],
    mobs:['mooshroom'],
    resources:['Mycelium','Red Mushroom','Brown Mushroom','Huge Mushroom'] },

  { id:'cherry_grove', name:'Cherry Grove', dimension:'overworld', emoji:'ğŸŒ¸',
    theme:{ bgColor:'#1a0d14', bgGradient:'radial-gradient(ellipse at top, #200f18 0%, #1a0d14 70%)', accentColor:'#f48fb1', cardBg:'#1e1018' },
    desc:'A beautiful mountain biome with pink cherry blossom trees, petal particle effects, and calming pink skies. Added in Java 1.20.',
    structures:[],
    mobs:['pig','sheep','rabbit','bee'],
    resources:['Cherry Log','Cherry Leaves','Pink Petals','Peat Moss'] },

  { id:'pale_garden', name:'Pale Garden', dimension:'overworld', emoji:'ğŸŒ«ï¸',
    theme:{ bgColor:'#0f0f0f', bgGradient:'radial-gradient(ellipse at top, #141414 0%, #0f0f0f 70%)', accentColor:'#cfd8dc', cardBg:'#141414' },
    desc:'A haunting, desolate biome with pale oak trees draped in white hanging moss. The sky appears grey and lifeless. Home to the Creaking mob. Added in Java 1.21.4.',
    structures:[],
    mobs:['creaking'],
    resources:['Pale Oak Log','Pale Hanging Moss','Pale Moss Carpet','Closed Eyeblossom'] },

  { id:'lush_caves', name:'Lush Caves', dimension:'overworld', emoji:'ğŸŒ¿',
    theme:{ bgColor:'#0a1a0a', bgGradient:'radial-gradient(ellipse at top, #102010 0%, #0a1a0a 70%)', accentColor:'#69f0ae', cardBg:'#0f1e0f' },
    desc:'Underground cave biomes lush with vegetation, glow berries, azalea trees, and dripleaf plants. Axolotls spawn in the underground water.',
    structures:[],
    mobs:['axolotl','tropical_fish','glow_squid','bat'],
    resources:['Glow Berry','Dripleaf','Azalea','Rooted Dirt','Spore Blossom'] },

  { id:'dripstone_caves', name:'Dripstone Caves', dimension:'overworld', emoji:'ğŸª¨',
    theme:{ bgColor:'#141010', bgGradient:'radial-gradient(ellipse at top, #1a1414 0%, #141010 70%)', accentColor:'#a1887f', cardBg:'#1a1414' },
    desc:'Underground caves filled with stalactites and stalagmites of dripstone. Water and lava drip from the pointed dripstone, creating cauldron-filling systems.',
    structures:['Trial Chambers'],
    mobs:['cave_spider','bat','breeze','drowned'],
    resources:['Pointed Dripstone','Dripstone Block','Copper Ore'] },

  { id:'deep_dark', name:'Deep Dark', dimension:'overworld', emoji:'ğŸ’€',
    theme:{ bgColor:'#050508', bgGradient:'radial-gradient(ellipse at top, #0a0a14 0%, #050508 70%)', accentColor:'#00e5ff', cardBg:'#0d0d12' },
    desc:'A vast, silent cave biome found deep underground below y=-20. Sculk blocks cover the ground and walls. The Warden patrols here, detecting any vibration.',
    structures:['Ancient City'],
    mobs:['warden','bat'],
    resources:['Sculk','Sculk Sensor','Sculk Catalyst','Sculk Shrieker','Reinforced Deepslate'] },

  // NETHER
  { id:'nether_wastes', name:'Nether Wastes', dimension:'nether', emoji:'ğŸ”¥',
    theme:{ bgColor:'#1a0500', bgGradient:'radial-gradient(ellipse at top, #220800 0%, #1a0500 70%)', accentColor:'#ff5722', cardBg:'#200800' },
    desc:'The most common Nether biome â€” a sea of Netherrack, lava lakes, and Ghast-filled skies. Zombified Piglins wander here.',
    structures:['Nether Fortress','Ruined Portal','Bastion Remnant'],
    mobs:['zombified_piglin','ghast','blaze','enderman'],
    resources:['Netherrack','Nether Quartz','Soul Sand','Gravel'] },

  { id:'crimson_forest', name:'Crimson Forest', dimension:'nether', emoji:'ğŸ”´',
    theme:{ bgColor:'#1a0008', bgGradient:'radial-gradient(ellipse at top, #220010 0%, #1a0008 70%)', accentColor:'#e91e63', cardBg:'#20000e' },
    desc:'A blood-red mushroom forest of the Nether. Crimson Fungi and Nylium cover the ground. Piglins and Hoglins spawn here.',
    structures:['Bastion Remnant','Ruined Portal'],
    mobs:['piglin','hoglin','zombified_piglin'],
    resources:['Crimson Stem','Crimson Fungus','Crimson Nylium','Weeping Vines','Shroomlight'] },

  { id:'warped_forest', name:'Warped Forest', dimension:'nether', emoji:'ğŸŒ€',
    theme:{ bgColor:'#001a18', bgGradient:'radial-gradient(ellipse at top, #002220 0%, #001a18 70%)', accentColor:'#00bfa5', cardBg:'#002220' },
    desc:'A teal-colored alien forest. Endermen spawn frequently here. Striders can be found in the lava lakes. Hoglins avoid this biome.',
    structures:['Ruined Portal'],
    mobs:['enderman','strider'],
    resources:['Warped Stem','Warped Fungus','Warped Nylium','Twisting Vines','Nether Sprouts'] },

  { id:'soul_sand_valley', name:'Soul Sand Valley', dimension:'nether', emoji:'ğŸ’™',
    theme:{ bgColor:'#0a0a1a', bgGradient:'radial-gradient(ellipse at top, #101028 0%, #0a0a1a 70%)', accentColor:'#40c4ff', cardBg:'#101028' },
    desc:'A haunting biome of soul sand, soul soil, and bone structures. The eerie blue soul fire illuminates ancient fossils.',
    structures:['Ruined Portal','Fossil'],
    mobs:['ghast','skeleton','enderman'],
    resources:['Soul Sand','Soul Soil','Soul Fire','Basalt','Bone Block'] },

  { id:'basalt_deltas', name:'Basalt Deltas', dimension:'nether', emoji:'ğŸŒ‹',
    theme:{ bgColor:'#0f0f0f', bgGradient:'radial-gradient(ellipse at top, #141418 0%, #0f0f0f 70%)', accentColor:'#607d8b', cardBg:'#141418' },
    desc:'A chaotic volcanic biome of basalt pillars, magma, and lava lakes. Magma Cubes are extremely common here. Visibility is poor due to the ash particle effects.',
    structures:['Ruined Portal'],
    mobs:['magma_cube','ghast'],
    resources:['Basalt','Blackstone','Magma Block','Nether Gravel'] },

  // THE END
  { id:'the_end', name:'The End', dimension:'end', emoji:'ğŸŒŒ',
    theme:{ bgColor:'#0d0014', bgGradient:'radial-gradient(ellipse at top, #120020 0%, #0d0014 70%)', accentColor:'#9c27b0', cardBg:'#100018' },
    desc:'A dark, mysterious dimension of floating End Stone islands. The Ender Dragon circles the central island while being healed by End Crystals. After defeating the Dragon, End Cities with Elytra can be found.',
    structures:['End City','End Ship','Obsidian Pillars','Exit Portal'],
    mobs:['ender_dragon','enderman','shulker','zoglin'],
    resources:['End Stone','Obsidian','Chorus Fruit','End Rod','Elytra (End Ship)'] },

  { id:'nether_fortress', name:'Nether Fortress', dimension:'nether', emoji:'ğŸ°',
    theme:{ bgColor:'#1a0800', bgGradient:'radial-gradient(ellipse at top, #220c00 0%, #1a0800 70%)', accentColor:'#ff7043', cardBg:'#200a00' },
    desc:'Massive dark structures made of Nether Brick that loom above the lava seas. The only place Blazes and Wither Skeletons naturally spawn. Nether Wart grows in its staircases. An essential early Nether destination for progression.',
    structures:['Blaze Spawner','Nether Wart Farm','Treasure Chests'],
    mobs:['blaze','zombified_piglin'],
    resources:['Nether Brick','Nether Wart','Soul Sand','Magma Block'] },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STRUCTURES DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const STRUCTURES = [
  { id:'village', name:'Village', img:'structures/village.png', emoji:'ğŸ˜ï¸',
    dimension:'overworld', rarity:'common',
    biomes:['Plains','Desert','Savanna','Taiga','Snowy Plains'],
    desc:'Naturally generated settlements inhabited by Villagers. Contains houses, farms, wells, and various profession buildings. Trading with villagers is one of the most powerful economic systems in the game.',
    loot:['Emerald','Food','Tools','Armor','Enchanted Books'],
    lootIds:['emerald'],
    mobs:['zombie','pillager','witch'] },

  { id:'ruined_portal', name:'Ruined Portal', img:'structures/ruined_portal.png', emoji:'ğŸ”®',
    dimension:'overworld', rarity:'common',
    biomes:['Any (Overworld & Nether)'],
    desc:'Damaged Nether Portals scattered across the Overworld and Nether. Each contains a chest with golden items and obsidian. They can be repaired into a functional Nether Portal with obsidian and flint & steel.',
    loot:['Golden Items','Obsidian','Crying Obsidian','Gold Block'],
    lootIds:['gold_ingot'],
    mobs:[] },

  { id:'pillager_outpost', name:'Pillager Outpost', img:'structures/pillager_outpost.png', emoji:'ğŸ—¼',
    dimension:'overworld', rarity:'uncommon',
    biomes:['Plains','Desert','Savanna','Taiga','Snowy Plains','Mountains'],
    desc:'Tall dark-oak watchtowers permanently garrisoned by Pillagers. A caged Allay is sometimes found nearby. Killing the outpost captain grants Bad Omen, which triggers a Village Raid on entry.',
    loot:['Crossbow','Arrow','Emerald','Iron Ingot'],
    lootIds:['crossbow','arrow','emerald','iron_ingot'],
    mobs:['pillager','allay'] },

  { id:'stronghold', name:'Stronghold', img:'structures/stronghold.png', emoji:'ğŸ°',
    dimension:'overworld', rarity:'rare',
    biomes:['Underground (any biome)'],
    desc:'Massive underground fortresses containing the End Portal â€” the only way to reach The End. Only 3 strongholds generate per world in concentric rings. Navigate using Eyes of Ender thrown above ground. Contains libraries, prison cells, and a portal room.',
    loot:['Ender Pearl','Enchanted Books','Golden Apple','End Portal Frame'],
    lootIds:['ender_pearl','eye_of_ender'],
    mobs:['silverfish','zombie','skeleton'] },

  { id:'ocean_monument', name:'Ocean Monument', img:'structures/ocean_monument.png', emoji:'ğŸŒŠ',
    dimension:'overworld', rarity:'uncommon',
    biomes:['Deep Ocean','Ocean'],
    desc:'Enormous prismarine structures submerged in ocean depths. Protected by swarms of Guardians and three Elder Guardians that inflict Mining Fatigue III. The central treasure chamber hides a cache of gold blocks. Sponges found here can drain flooded rooms.',
    loot:['Sponge','Prismarine','Gold Block','Sea Lantern'],
    lootIds:['sponge','prismarine_shard','prismarine_crystal','sea_lantern'],
    mobs:['guardian','elder_guardian'] },

  { id:'woodland_mansion', name:'Woodland Mansion', img:'structures/woodland_mansion.png', emoji:'ğŸšï¸',
    dimension:'overworld', rarity:'rare',
    biomes:['Dark Forest'],
    desc:'Enormous three-story mansions deep in Dark Forests, inhabited by Vindicators, Evokers, and caged Allays. Contains dozens of unique rooms including treasure vaults. Locating one requires a Woodland Explorer Map from a cartographer villager.',
    loot:['Totem of Undying','Enchanted Books','Diamond Gear'],
    lootIds:['totem_of_undying','emerald'],
    mobs:['vindicator','evoker','vex','allay'] },

  { id:'nether_fortress', name:'Nether Fortress', img:'structures/nether_fortress.png', emoji:'ğŸ¯',
    dimension:'nether', rarity:'uncommon',
    biomes:['Nether Wastes','Soul Sand Valley','Any Nether Biome'],
    desc:'Massive dark structures of Nether Brick sprawling across the Nether. The only natural spawn point for Blazes and Wither Skeletons. Nether Wart grows in the staircase gardens. Essential for progression â€” Blaze Rods power Brewing Stands and craft Eyes of Ender.',
    loot:['Blaze Rod','Nether Wart','Saddle','Enchanted Books'],
    lootIds:['blaze_rod','saddle'],
    mobs:['blaze','wither_skeleton','zombified_piglin','magma_cube'] },

  { id:'bastion_remnant', name:'Bastion Remnant', img:'structures/bastion_remnant.png', emoji:'ğŸ§±',
    dimension:'nether', rarity:'uncommon',
    biomes:['Crimson Forest','Nether Wastes','Warped Forest','Soul Sand Valley'],
    desc:'Enormous ruined Piglin strongholds of blackstone and gilded blackstone. Four variants exist: bridge, hoglin stables, housing units, and treasure room. The treasure vault holds some of the most valuable Nether loot but is heavily guarded by Piglins.',
    loot:['Netherite Scrap','Ancient Debris','Golden Items','Pigstep Music Disc'],
    lootIds:['gold_ingot','gold_nugget'],
    mobs:['piglin','hoglin','zombified_piglin'] },

  { id:'end_city', name:'End City', img:'structures/end_city.png', emoji:'ğŸ™ï¸',
    dimension:'end', rarity:'uncommon',
    biomes:['Outer End Islands'],
    desc:'Tall purple shulker-inhabited towers on the outer End islands, only reachable after defeating the Ender Dragon. End Cities generate with End Ships docked nearby, which always contain an Elytra in an item frame. One of the best late-game loot sources.',
    loot:['Elytra (End Ship)','Diamond Gear','Shulker Shell'],
    lootIds:['elytra','shulker_shell'],
    mobs:['shulker','enderman'] },

  { id:'ancient_city', name:'Ancient City', img:'structures/ancient_city.png', emoji:'ğŸ›ï¸',
    dimension:'overworld', rarity:'rare',
    biomes:['Deep Dark (yâ‰ˆ-52)'],
    desc:'Vast underground cities of sculk and deepslate found only in the Deep Dark biome. The most dangerous structure in the game â€” the Warden patrols here. Contains reinforced deepslate (uncraftable), echo shards, and the Swift Sneak enchantment exclusive to this structure.',
    loot:['Echo Shard','Disc Fragment (5)','Reinforced Deepslate','Swift Sneak Books'],
    lootIds:['sculk_catalyst'],
    mobs:['warden'] },

  { id:'trial_chambers', name:'Trial Chambers', img:'structures/trial_chambers.png', emoji:'âš”ï¸',
    dimension:'overworld', rarity:'uncommon',
    biomes:['Underground (Dripstone & Overworld Caves)'],
    desc:'Procedurally generated underground challenge arenas added in Java 1.21. Contains Trial Spawners that release waves of mobs and dispense loot. Ominous Trial Spawners trigger harder variants with better rewards. The Mace and Heavy Core are exclusive to this structure.',
    loot:['Breeze Rod','Wind Charge','Mace','Heavy Core','Ominous Bottles'],
    lootIds:['breeze_rod','wind_charge','mace'],
    mobs:['breeze','bogged','silverfish'] },

  { id:'mineshaft', name:'Abandoned Mineshaft', img:'structures/mineshaft.png', emoji:'â›ï¸',
    dimension:'overworld', rarity:'common',
    biomes:['Underground (any)','Badlands (surface)'],
    desc:'Sprawling networks of wooden tunnels and minecart tracks underground. Cave Spider spawners are common here. In Badlands biomes, mineshafts often break the surface exposing gold at all heights. Chest minecarts scattered throughout contain useful early-game loot.',
    loot:['Rail','Torch','Chest Minecart','String','Gold (Badlands)'],
    lootIds:['string','iron_ingot'],
    mobs:['cave_spider'] },

  { id:'desert_temple', name:'Desert Temple', img:'structures/desert_temple.png', emoji:'ğŸ›ï¸',
    dimension:'overworld', rarity:'uncommon',
    biomes:['Desert'],
    desc:'Large sandstone pyramids buried in desert biomes. The main chamber contains four treasure chests below a colored wool floor, protected by a TNT pressure plate trap beneath the blue wool block. Always look before you leap â€” the trap kills instantly.',
    loot:['Enchanted Books','Diamond','Emerald','Gold','Saddle','Bones'],
    lootIds:['emerald'],
    mobs:[] },

  { id:'jungle_temple', name:'Jungle Temple', img:'structures/jungle_temple.png', emoji:'ğŸŒ¿',
    dimension:'overworld', rarity:'uncommon',
    biomes:['Jungle','Bamboo Jungle'],
    desc:'Crumbling mossy cobblestone temples hidden in dense jungles. Features two tripwire trap corridors and a lever puzzle. Solving the lever combination without triggering the dispensers grants access to the primary loot chest behind a hidden door.',
    loot:['Enchanted Books','Diamond','Emerald','Saddle'],
    lootIds:['emerald'],
    mobs:[] },

  { id:'igloo', name:'Igloo', img:'structures/igloo.png', emoji:'ğŸ ',
    dimension:'overworld', rarity:'uncommon',
    biomes:['Snowy Plains','Snowy Taiga','Snowy Slopes'],
    desc:'Small snow-block structures in cold biomes. Some igloos have a secret trapdoor beneath a carpet leading to a basement laboratory: a zombie villager and villager are caged together, and a Golden Apple sits ready â€” use it to cure the zombie villager into a valuable discounted trader.',
    loot:['Golden Apple','Brewing Stand','Coal','Wheat'],
    lootIds:[],
    mobs:['zombie','villager'] },

  { id:'shipwreck', name:'Shipwreck', img:'structures/shipwreck.png', emoji:'â›µ',
    dimension:'overworld', rarity:'common',
    biomes:['Ocean','Beach'],
    desc:'Sunken or beached wooden ships in multiple orientations. Contain up to 3 chests: supply (food, tools), treasure (emeralds, iron, gold), and map chest. The buried treasure map from the map chest leads to a Heart of the Sea â€” the key ingredient for a Conduit.',
    loot:['Buried Treasure Map','Emerald','Iron Ingot','Paper','Wheat','Carrots'],
    lootIds:['emerald','iron_ingot','carrot'],
    mobs:['drowned'] },

  { id:'buried_treasure', name:'Buried Treasure', img:'structures/buried_treasure.png', emoji:'ğŸ’',
    dimension:'overworld', rarity:'common',
    biomes:['Beach'],
    desc:'Single hidden chests buried under sand or gravel on beaches. Located using Buried Treasure Maps from Shipwrecks or by following Dolphins. Always contains a Heart of the Sea â€” the sole crafting ingredient for the Conduit. The chest is always at chunk coordinate x=9, z=9.',
    loot:['Heart of the Sea','Diamond','Iron Ingot','Gold Ingot','Cooked Fish','TNT'],
    lootIds:['iron_ingot'],
    mobs:[] },

  { id:'end_ship', name:'End Ship', img:'structures/end_ship.png', emoji:'ğŸš¢',
    dimension:'end', rarity:'uncommon',
    biomes:['Outer End Islands (docked above End Cities)'],
    desc:'Flying vessels docked above End Cities. Every End Ship contains exactly one Elytra displayed in an item frame â€” the only legitimate survival source of this iconic gliding item. Also features a Dragon Head trophy on the bow and a Brewing Stand with Instant Health potions.',
    loot:['Elytra','Dragon Head','Brewing Stand','Potion of Instant Health'],
    lootIds:['elytra'],
    mobs:['shulker'] },
];

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONCEPTS DATA
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const CONCEPTS = [
  { id:'ranged_combat', name:'Ranged Combat', emoji:'ğŸ¹',
    desc:'Attacking enemies from a distance using Bows, Crossbows, or thrown projectiles like Ender Pearls and Tridents.' },
  { id:'firework_launching', name:'Firework Launching', emoji:'ğŸ†',
    desc:'Using Firework Rockets for celebrations or to propel Elytra flight.' },
  { id:'elytra_boost', name:'Elytra Boost', emoji:'ğŸª‚',
    desc:'Using Firework Rockets while wearing Elytra to propel yourself forward mid-glide.' },
  { id:'brewing', name:'Brewing', emoji:'ğŸ§ª',
    desc:'Using a Brewing Stand to combine ingredients with Water Bottles to create potions.' },
  { id:'enchanting', name:'Enchanting', emoji:'âœ¨',
    desc:'Applying magical upgrades to tools, weapons, and armor using an Enchanting Table or Anvil.' },
  { id:'taming', name:'Taming', emoji:'ğŸ¾',
    desc:'Using specific items to tame wild mobs (wolves with bones, cats with fish, horses with patience).' },
  { id:'trading', name:'Villager Trading', emoji:'ğŸ¤',
    desc:'Exchanging items with Villagers for Emeralds or useful goods. Unlocking higher trade tiers gives better items.' },
  { id:'beacon', name:'Beacon Power', emoji:'ğŸ”†',
    desc:'A fully powered Beacon grants area-of-effect status effects like Speed, Haste, Resistance, Jump Boost, or Strength.' },
  { id:'teleportation', name:'Teleportation', emoji:'ğŸŒ€',
    desc:'Instantly moving from one location to another with tools like Ender Pearls and commands.' },
];

// Concept lookup helper
function findConcept(str) {
  const lower = str.toLowerCase();
  return CONCEPTS.find(c => lower.includes(c.name.toLowerCase()));
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RELATION RESOLUTION HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function normalizeLabel(str) {
  return String(str || '')
    .toLowerCase()
    .replace(/sepctral/g, 'spectral')
    .replace(/\([^)]*\)/g, ' ')
    .replace(/[_-]+/g, ' ')
    .replace(/[^a-z0-9\s]/g, ' ')
    .replace(/\s+/g, ' ')
    .trim();
}

function itemIdToLabel(id) {
  return String(id || '').replace(/[_-]+/g, ' ').replace(/\w/g, c => c.toUpperCase());
}

function resolveEntityLink(label, explicitId, preferred = ['item','mob','location','structure','concept']) {
  if (explicitId) {
    const byId = ITEMS.find(i => i.id === explicitId) || MOBS.find(m => m.id === explicitId) || LOCATIONS.find(l => l.id === explicitId) || STRUCTURES.find(s => s.id === explicitId) || CONCEPTS.find(c => c.id === explicitId);
    if (byId) {
      if (ITEMS.includes(byId)) return { type:'item', value: byId };
      if (MOBS.includes(byId)) return { type:'mob', value: byId };
      if (LOCATIONS.includes(byId)) return { type:'location', value: byId };
      if (STRUCTURES.includes(byId)) return { type:'structure', value: byId };
      return { type:'concept', value: byId };
    }
  }

  const n = normalizeLabel(label);
  const buckets = {
    item: ITEMS.map(v => ({ type:'item', value:v, n:normalizeLabel(v.name) })),
    mob: MOBS.map(v => ({ type:'mob', value:v, n:normalizeLabel(v.name) })),
    location: LOCATIONS.map(v => ({ type:'location', value:v, n:normalizeLabel(v.name) })),
    structure: STRUCTURES.map(v => ({ type:'structure', value:v, n:normalizeLabel(v.name) })),
    concept: CONCEPTS.map(v => ({ type:'concept', value:v, n:normalizeLabel(v.name) })),
  };

  for (const k of preferred) {
    const exact = buckets[k].find(x => x.n === n);
    if (exact) return { type: exact.type, value: exact.value };
  }
  for (const k of preferred) {
    const fuzzy = buckets[k].find(x => n && (x.n.includes(n) || n.includes(x.n)));
    if (fuzzy) return { type: fuzzy.type, value: fuzzy.value };
  }
  return null;
}

function openLinkedEntity(link, render) {
  if (!link) return;
  pushHistory(render);
  if (link.type === 'item') return openItemModal(link.value, true);
  if (link.type === 'mob') return openMobModal(link.value, true);
  if (link.type === 'location') return openLocationModal(link.value, true);
  if (link.type === 'structure') return openStructureModal(link.value, true);
  if (link.type === 'concept') return openConceptModal(link.value, true);
}

function openRelationModal(label, fromHistory) {
  const render = () => {
    modalName.textContent = label;
    modalCat.className = 'cat-badge';
    modalCat.style.cssText = 'color:var(--orange);border-color:var(--orange);background:rgba(255,152,0,0.12)';
    modalCat.textContent = 'RELATION';
    modalImg.classList.remove('item-focus');
    modalImg.innerHTML = `<div class="modal-entity-emoji">ğŸ”—</div>`;

    const related = [];
    const n = normalizeLabel(label);

    ITEMS.forEach(i => {
      const mentions = [i.name, ...(i.usedFor||[]), ...(i.craftedFrom||[]).map(c => c.itemId ? itemIdToLabel(c.itemId) : '')].filter(Boolean);
      if (mentions.some(m => normalizeLabel(m) === n)) related.push({type:'item',value:i});
    });
    MOBS.forEach(m => {
      const mentions = [m.name, ...(m.drops||[]), m.spawn].filter(Boolean);
      if (mentions.some(x => normalizeLabel(x) === n)) related.push({type:'mob',value:m});
    });
    LOCATIONS.forEach(l => {
      const mentions = [l.name, ...(l.resources||[]), ...(l.structures||[])].filter(Boolean);
      if (mentions.some(x => normalizeLabel(x) === n)) related.push({type:'location',value:l});
    });
    STRUCTURES.forEach(s => {
      const mentions = [s.name, ...(s.loot||[]), ...(s.biomes||[])].filter(Boolean);
      if (mentions.some(x => normalizeLabel(x) === n)) related.push({type:'structure',value:s});
    });

    const uniq = [];
    const seen = new Set();
    related.forEach(r => {
      const key = `${r.type}:${r.value.id}`;
      if (!seen.has(key)) { seen.add(key); uniq.push(r); }
    });

    const chips = uniq.length
      ? uniq.map(r => `<span class="chip clickable" data-type="${r.type}" data-id="${r.value.id}">${r.value.emoji || 'â€¢'} ${r.value.name}</span>`).join('')
      : '<span class="chip" style="color:var(--text-dim)">No direct entry yet</span>';

    modalBody.innerHTML = `
      <div class="section-title">DETAIL</div>
      <div class="section-text">This relationship is now clickable, but it does not yet have a dedicated canonical entity in the encyclopedia dataset.</div>
      <div class="section-title">RELATED ENTRIES</div>
      <div class="chip-list">${chips}</div>
    `;

    modalBody.querySelectorAll('[data-type][data-id]').forEach(chip => {
      chip.addEventListener('click', () => {
        const t = chip.dataset.type, id = chip.dataset.id;
        const link = resolveEntityLink('', id);
        if (link) openLinkedEntity(link, render);
      });
    });
  };

  if (!fromHistory) openModal(render);
  else render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATE & NAVIGATION
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let currentTab = 'mobs';
let modalHistory = [];
let activeLocationTheme = null;
let userBgColor = localStorage.getItem('userBgColor') || '#0d0d0d';

// Apply saved color on load
applyUserColor(userBgColor);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  TAB SWITCHING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    switchTab(btn.dataset.tab);
  });
});

function switchTab(tab, highlightId) {
  currentTab = tab;
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  document.querySelector(`.tab-btn[data-tab="${tab}"]`).classList.add('active');
  document.querySelectorAll('.tab-pane').forEach(p => p.classList.remove('active'));
  document.getElementById('tab' + tab.charAt(0).toUpperCase() + tab.slice(1)).classList.add('active');

  // Show/hide controls
  document.getElementById('mobControls').style.display = tab === 'mobs' ? '' : 'none';
  document.getElementById('itemControls').style.display = tab === 'items' ? '' : 'none';
  document.getElementById('locationControls').style.display = tab === 'locations' ? '' : 'none';
  document.getElementById('structureControls').style.display = tab === 'structures' ? '' : 'none';

  updateStats();

  if (highlightId) {
    setTimeout(() => highlightCard(tab, highlightId), 100);
  }
}

function highlightCard(tab, id) {
  const gridId = tab === 'mobs' ? 'mobGrid' : tab === 'items' ? 'itemGrid' : tab === 'structures' ? 'structureGrid' : 'locationGrid';
  const card = document.querySelector(`#${gridId} [data-id="${id}"]`);
  if (card) {
    card.scrollIntoView({ behavior:'smooth', block:'center' });
    card.style.outline = `3px solid var(--accent)`;
    setTimeout(() => card.style.outline = '', 2000);
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  IMAGE HELPERS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function mobImgHtml(mob, size = 72) {
  return `<img src="${mob.img}" alt="${mob.name}" loading="lazy" style="max-width:${size}px;max-height:${size}px;image-rendering:pixelated;" onerror="this.style.display='none';this.nextSibling.style.display='block'"><span class="entity-emoji-fallback" style="display:none;font-size:${Math.round(size*0.55)}px">${mob.emoji}</span>`;
}

function itemImgHtml(item, size = 72) {
  return `<img src="${item.img}" alt="${item.name}" loading="lazy" style="max-width:${size}px;max-height:${size}px;image-rendering:pixelated;" onerror="this.style.display='none';this.nextSibling.style.display='block'"><span class="entity-emoji-fallback" style="display:none;font-size:${Math.round(size*0.55)}px">${item.emoji}</span>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER MOB GRID
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let mobFilter = 'all', mobSearch = '';

function renderMobs() {
  const grid = document.getElementById('mobGrid');
  const noRes = document.getElementById('mobNoResults');
  grid.querySelectorAll('.entity-card').forEach(c => c.remove());
  const sl = mobSearch.toLowerCase();
  let visible = 0;

  MOBS.forEach(mob => {
    const matchCat = mobFilter === 'all' || mob.cat === mobFilter;
    const matchSearch = mob.name.toLowerCase().includes(sl) || mob.cat.toLowerCase().includes(sl) || mob.spawn.toLowerCase().includes(sl);
    const card = document.createElement('div');
    card.className = 'entity-card mob-card';
    card.dataset.cat = mob.cat;
    card.dataset.id = mob.id;
    card.innerHTML = `<span class="cat-dot"></span><div class="entity-img-wrap">${mobImgHtml(mob)}</div><div class="entity-name">${mob.name}</div>`;
    card.addEventListener('click', () => openMobModal(mob));
    if (!matchCat || !matchSearch) card.classList.add('hidden'); else visible++;
    grid.insertBefore(card, noRes);
  });

  noRes.style.display = visible === 0 ? 'block' : 'none';
}

document.getElementById('mobSearch').addEventListener('input', e => { mobSearch = e.target.value.trim(); renderMobs(); });
document.getElementById('mobFilters').querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.getElementById('mobFilters').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    mobFilter = btn.dataset.filter;
    renderMobs();
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER ITEM GRID
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let itemFilter = 'all', itemSearch = '';

function renderItems() {
  const grid = document.getElementById('itemGrid');
  const noRes = document.getElementById('itemNoResults');
  grid.querySelectorAll('.entity-card').forEach(c => c.remove());
  const sl = itemSearch.toLowerCase();
  let visible = 0;

  ITEMS.forEach(item => {
    const matchCat = itemFilter === 'all' || item.category === itemFilter;
    const matchSearch = item.name.toLowerCase().includes(sl) || item.category.toLowerCase().includes(sl) || item.desc.toLowerCase().includes(sl);
    const card = document.createElement('div');
    card.className = 'entity-card item-card';
    card.dataset.category = item.category;
    card.dataset.id = item.id;
    card.innerHTML = `
      <div class="entity-img-wrap">${itemImgHtml(item)}</div>
      <div class="entity-name">${item.name}</div>
      <span class="cat-badge ${item.category}" style="font-size:5px;padding:2px 5px;">${item.category.toUpperCase()}</span>`;
    card.addEventListener('click', () => openItemModal(item));
    if (!matchCat || !matchSearch) card.classList.add('hidden'); else visible++;
    grid.insertBefore(card, noRes);
  });

  noRes.style.display = visible === 0 ? 'block' : 'none';
}

document.getElementById('itemSearch').addEventListener('input', e => { itemSearch = e.target.value.trim(); renderItems(); });
document.getElementById('itemFilters').querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.getElementById('itemFilters').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    itemFilter = btn.dataset.filter;
    renderItems();
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER LOCATION GRID
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let locationFilter = 'all', locationSearch = '';

function renderLocations() {
  const grid = document.getElementById('locationGrid');
  const noRes = document.getElementById('locationNoResults');
  grid.querySelectorAll('.entity-card').forEach(c => c.remove());
  const sl = locationSearch.toLowerCase();
  let visible = 0;

  LOCATIONS.forEach(loc => {
    const matchDim = locationFilter === 'all' || loc.dimension === locationFilter;
    const matchSearch = loc.name.toLowerCase().includes(sl) || loc.dimension.toLowerCase().includes(sl) || loc.desc.toLowerCase().includes(sl);
    const card = document.createElement('div');
    card.className = 'entity-card location-card';
    card.dataset.dimension = loc.dimension;
    card.dataset.id = loc.id;
    card.innerHTML = `
      <div class="location-emoji">${loc.emoji}</div>
      <div class="entity-name">${loc.name}</div>
      <span class="location-dim-badge dim-${loc.dimension}">${loc.dimension.toUpperCase()}</span>`;
    card.addEventListener('click', () => openLocationModal(loc));
    if (!matchDim || !matchSearch) card.classList.add('hidden'); else visible++;
    grid.insertBefore(card, noRes);
  });

  noRes.style.display = visible === 0 ? 'block' : 'none';
}

document.getElementById('locationSearch').addEventListener('input', e => { locationSearch = e.target.value.trim(); renderLocations(); });
document.getElementById('locationFilters').querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.getElementById('locationFilters').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    locationFilter = btn.dataset.filter;
    renderLocations();
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  RENDER STRUCTURE GRID
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let structureFilter = 'all', structureSearch = '';

function renderStructures() {
  const grid = document.getElementById('structureGrid');
  const noRes = document.getElementById('structureNoResults');
  grid.querySelectorAll('.entity-card').forEach(c => c.remove());
  const sl = structureSearch.toLowerCase();
  let visible = 0;

  STRUCTURES.forEach(struct => {
    const matchDim = structureFilter === 'all' || struct.dimension === structureFilter || struct.rarity === structureFilter;
    const matchSearch = struct.name.toLowerCase().includes(sl) || struct.dimension.toLowerCase().includes(sl) || struct.rarity.toLowerCase().includes(sl) || struct.desc.toLowerCase().includes(sl);
    const card = document.createElement('div');
    card.className = 'entity-card structure-card';
    card.dataset.dimension = struct.dimension;
    card.dataset.rarity = struct.rarity;
    card.dataset.id = struct.id;
    card.innerHTML = `
      <div class="entity-img-wrap">
        <img src="${struct.img}" alt="${struct.name}" loading="lazy" style="max-width:96px;max-height:96px;object-fit:contain;" onerror="this.style.display='none';this.nextSibling.style.display='block'">
        <span class="entity-emoji-fallback" style="display:none;font-size:52px">${struct.emoji}</span>
      </div>
      <div class="entity-name">${struct.name}</div>
      <span class="location-dim-badge dim-${struct.dimension}">${struct.dimension.toUpperCase()}</span>
      <span class="rarity-badge rarity-${struct.rarity}">${struct.rarity.toUpperCase()}</span>`;
    card.addEventListener('click', () => openStructureModal(struct));
    if (!matchDim || !matchSearch) card.classList.add('hidden'); else visible++;
    grid.insertBefore(card, noRes);
  });

  noRes.style.display = visible === 0 ? 'block' : 'none';
}

document.getElementById('structureSearch').addEventListener('input', e => { structureSearch = e.target.value.trim(); renderStructures(); });
document.getElementById('structureFilters').querySelectorAll('.filter-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.getElementById('structureFilters').querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    structureFilter = btn.dataset.filter;
    renderStructures();
  });
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STATS BAR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function updateStats() {
  const statsText = document.getElementById('statsText');
  if (currentTab === 'mobs') {
    const cats = { passive:0, neutral:0, hostile:0, boss:0 };
    MOBS.forEach(m => cats[m.cat]++);
    statsText.textContent = `${MOBS.length} mobs Â· Passive: ${cats.passive} Â· Neutral: ${cats.neutral} Â· Hostile: ${cats.hostile} Â· Bosses: ${cats.boss}`;
  } else if (currentTab === 'items') {
    const cats = {};
    ITEMS.forEach(i => cats[i.category] = (cats[i.category]||0)+1);
    statsText.textContent = `${ITEMS.length} items Â· Material: ${cats.material||0} Â· Food: ${cats.food||0} Â· Combat: ${cats.combat||0} Â· Rare: ${cats.rare||0}`;
  } else if (currentTab === 'structures') {
    const dims = { overworld:0, nether:0, end:0 };
    const rars = { common:0, uncommon:0, rare:0, unique:0 };
    STRUCTURES.forEach(s => { dims[s.dimension]=(dims[s.dimension]||0)+1; rars[s.rarity]++; });
    statsText.textContent = `${STRUCTURES.length} structures Â· Overworld: ${dims.overworld} Â· Nether: ${dims.nether} Â· End: ${dims.end||0} Â· Common: ${rars.common} Â· Uncommon: ${rars.uncommon} Â· Rare: ${rars.rare}`;
  } else {
    const dims = { overworld:0, nether:0, end:0 };
    LOCATIONS.forEach(l => dims[l.dimension]++);
    statsText.textContent = `${LOCATIONS.length} locations Â· Overworld: ${dims.overworld} Â· Nether: ${dims.nether} Â· The End: ${dims.end}`;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MODAL ENGINE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const overlay = document.getElementById('modalOverlay');
const modalName = document.getElementById('modalName');
const modalCat = document.getElementById('modalCat');
const modalImg = document.getElementById('modalImg');
const modalBody = document.getElementById('modalBody');
const modalClose = document.getElementById('modalClose');
const modalBack = document.getElementById('modalBack');

function openModal(renderFn) {
  renderFn();
  overlay.classList.add('open');
  document.body.style.overflow = 'hidden';
}

function closeModal() {
  overlay.classList.remove('open');
  document.body.style.overflow = '';
  modalHistory = [];
  modalBack.classList.remove('visible');
}

function pushHistory(renderFn) {
  modalHistory.push(renderFn);
  modalBack.classList.add('visible');
}

modalClose.addEventListener('click', closeModal);
overlay.addEventListener('click', e => { if (e.target === overlay) closeModal(); });
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

modalBack.addEventListener('click', () => {
  if (modalHistory.length > 0) {
    const prev = modalHistory.pop();
    prev();
    if (modalHistory.length === 0) modalBack.classList.remove('visible');
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MOB MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const BOSS_VIDEOS = {
  'ender_dragon': 'qlSPERNvNyc',
  'wither':       'epZa74hzCy8',
  'elder_guardian': 'Y_LZPV-OQVY',
  'warden':       'ZrORhlKhJDs',
};

function openMobModal(mob, fromHistory) {
  const render = () => {
    modalName.textContent = mob.name;
    modalCat.className = `cat-badge ${mob.cat}`;
    modalCat.textContent = mob.cat.charAt(0).toUpperCase() + mob.cat.slice(1);
    modalImg.classList.remove('item-focus');
    modalImg.innerHTML = mobImgHtml(mob, 80);

    const hpPct = Math.min(100, Math.round((mob.hp / 50) * 100));

    // Spawn location chip
    const loc = LOCATIONS.find(l => l.id === mob.spawnId);
    const spawnChip = loc
      ? `<span class="chip spawn-chip clickable" data-locid="${loc.id}" title="Switch to ${loc.name}">ğŸ“ ${mob.spawn}</span>`
      : `<span class="chip">${mob.spawn}</span>`;

    // Drop chips
    const dropsHtml = mob.drops.length > 0
      ? mob.drops.map(d => {
          const cleanName = d.replace(/\s*\([^)]*\)/g, '').trim();
          const item = ITEMS.find(i => i.name.toLowerCase() === cleanName.toLowerCase());
          return item
            ? `<span class="chip clickable" data-itemid="${item.id}" title="View ${item.name}">ğŸ ${d}</span>`
            : `<span class="chip clickable" data-relation="${d.replace(/"/g, '&quot;')}">ğŸ ${d}</span>`;
        }).join('')
      : '<span class="chip">Nothing</span>';

    // Boss YouTube video
    const videoId = BOSS_VIDEOS[mob.id];
    const videoHtml = videoId ? `
      <div class="section-title">ğŸ“º VIDEO</div>
      <div class="video-embed">
        <iframe width="100%" height="315" src="https://www.youtube.com/embed/${videoId}"
          frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
          allowfullscreen loading="lazy"></iframe>
      </div>` : '';

    modalBody.innerHTML = `
      <div class="stat-grid">
        <div class="stat-block">
          <div class="stat-label">â¤ Health</div>
          <div class="stat-value">${mob.hp * 2} HP (${mob.hp} hearts)</div>
          <div class="hp-bar-wrap"><div class="hp-bar" style="width:${hpPct}%"></div></div>
        </div>
        <div class="stat-block">
          <div class="stat-label">ğŸ“ Spawn</div>
          <div class="stat-value" style="margin-top:4px">${spawnChip}</div>
        </div>
      </div>
      <div class="section-title">DROPS</div>
      <div class="chip-list" id="mobDropChips">${dropsHtml}</div>
      <div class="section-title">BEHAVIOR</div>
      <div class="section-text">${mob.desc}</div>
      ${videoHtml}
    `;

    // Bind drop chips
    modalBody.querySelectorAll('[data-itemid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const item = ITEMS.find(i => i.id === chip.dataset.itemid);
        if (item) { pushHistory(render); openItemModal(item, true); }
      });
    });
    modalBody.querySelectorAll('[data-relation]').forEach(chip => {
      chip.addEventListener('click', () => {
        pushHistory(render);
        openRelationModal(chip.dataset.relation, true);
      });
    });

    // Bind spawn chip
    modalBody.querySelectorAll('[data-locid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const loc = LOCATIONS.find(l => l.id === chip.dataset.locid);
        if (loc) {
          pushHistory(render);
          applyLocationTheme(loc);
          openLocationModal(loc, true);
        }
      });
    });
  };

  if (!fromHistory) openModal(render);
  else render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  ITEM MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openItemModal(item, fromHistory) {
  const render = () => {
    modalName.textContent = item.name;
    modalCat.className = `cat-badge ${item.category}`;
    modalCat.textContent = item.category.toUpperCase();
    modalImg.classList.add('item-focus');
    modalImg.innerHTML = `
      <div class="item-3d-stage" aria-label="Rotating 3D item preview">
        <div class="item-3d-face front"><img src="${item.img}" alt="${item.name}" loading="lazy" onerror="this.style.display='none';this.parentElement.innerHTML='<span class=\"entity-emoji-fallback\" style=\"display:block;font-size:74px\">${item.emoji}</span>'"></div>
        <div class="item-3d-face back"><img src="${item.img}" alt="${item.name}" loading="lazy" onerror="this.style.display='none'"></div>
        <div class="item-3d-face right"><img src="${item.img}" alt="${item.name}" loading="lazy" onerror="this.style.display='none'"></div>
        <div class="item-3d-face left"><img src="${item.img}" alt="${item.name}" loading="lazy" onerror="this.style.display='none'"></div>
        <div class="item-3d-face top"><img src="${item.img}" alt="${item.name}" loading="lazy" onerror="this.style.display='none'"></div>
        <div class="item-3d-face bottom"><img src="${item.img}" alt="${item.name}" loading="lazy" onerror="this.style.display='none'"></div>
      </div>`;

    // UsedFor â€” with concept chip fallback
    const usedForHtml = item.usedFor.length > 0
      ? item.usedFor.map((u, i) => {
          const linkId = item.usedForIds && item.usedForIds[i];
          const targetItem = linkId && ITEMS.find(x => x.id === linkId);
          if (targetItem) return `<span class="chip clickable ingredient-chip" data-itemid="${targetItem.id}">${u}</span>`;
          const concept = findConcept(u);
          if (concept) return `<span class="chip concept-chip clickable" data-conceptid="${concept.id}">${concept.emoji} ${u}</span>`;
          const rel = resolveEntityLink(u, null, ['item','structure','location','mob','concept']);
          if (rel) return `<span class="chip clickable ingredient-chip" data-linktype="${rel.type}" data-linkid="${rel.value.id}">${u}</span>`;
          return `<span class="chip clickable" data-relation="${u.replace(/"/g, '&quot;')}">${u}</span>`;
        }).join('')
      : '<span class="chip">Decorative / Direct Use</span>';

    // CraftedFrom
    const craftedFromHtml = item.craftedFrom.length > 0
      ? item.craftedFrom.map(c => {
          const ing = ITEMS.find(i => i.id === c.itemId);
          return ing
            ? `<span class="chip ingredient-chip clickable" data-itemid="${ing.id}">${ing.emoji} ${ing.name} Ã—${c.qty}</span>`
            : `<span class="chip clickable" data-relation="${itemIdToLabel(c.itemId)}">${itemIdToLabel(c.itemId)} Ã—${c.qty}</span>`;
        }).join('')
      : '<span class="chip" style="color:var(--text-dim)">Not craftable</span>';

    // Reverse: what crafts this item?
    const usedToCraft = ITEMS.filter(i => i.craftedFrom.some(c => c.itemId === item.id));
    const usedToCraftHtml = usedToCraft.length > 0
      ? usedToCraft.map(i => `<span class="chip ingredient-chip clickable" data-itemid="${i.id}">${i.emoji} ${i.name}</span>`).join('')
      : '<span class="chip" style="color:var(--text-dim)">No recipes</span>';

    // DroppedBy mob thumbnails
    const droppedByHtml = item.droppedBy.length > 0
      ? `<div class="mob-thumb-list">${item.droppedBy.map(mid => {
          const mob = MOBS.find(m => m.id === mid);
          if (!mob) return '';
          return `<div class="mob-thumb" data-mobid="${mob.id}" title="${mob.name}">
            <img src="${mob.img}" alt="${mob.name}" onerror="this.style.display='none';this.nextSibling.style.display='flex'" style="width:40px;height:40px;object-fit:contain;image-rendering:pixelated;">
            <span class="mob-thumb-emoji" style="display:none;font-size:26px;width:40px;height:40px;line-height:40px;text-align:center">${mob.emoji}</span>
            <div class="mob-thumb-name">${mob.name}</div>
          </div>`;
        }).join('')}</div>`
      : '<span class="chip" style="color:var(--text-dim)">No mob drops</span>';

    modalBody.innerHTML = `
      <div class="section-title">DESCRIPTION</div>
      <div class="section-text">${item.desc}</div>
      <div class="section-title">USED FOR</div>
      <div class="chip-list">${usedForHtml}</div>
      <div class="section-title">CRAFTED FROM</div>
      <div class="chip-list" id="itemIngredients">${craftedFromHtml}</div>
      <div class="section-title">USED TO CRAFT</div>
      <div class="chip-list" id="itemUsedToCraft">${usedToCraftHtml}</div>
      <div class="section-title">DROPPED BY</div>
      <div id="itemDroppedBy">${droppedByHtml}</div>
    `;

    // Bind ingredient chips
    modalBody.querySelectorAll('[data-itemid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const it = ITEMS.find(i => i.id === chip.dataset.itemid);
        if (it) { pushHistory(render); openItemModal(it, true); }
      });
    });

    // Bind concept chips
    modalBody.querySelectorAll('[data-conceptid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const concept = CONCEPTS.find(c => c.id === chip.dataset.conceptid);
        if (concept) { pushHistory(render); openConceptModal(concept, true); }
      });
    });

    modalBody.querySelectorAll('[data-linktype][data-linkid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const link = resolveEntityLink('', chip.dataset.linkid);
        if (link) openLinkedEntity(link, render);
      });
    });

    modalBody.querySelectorAll('[data-relation]').forEach(chip => {
      chip.addEventListener('click', () => {
        pushHistory(render);
        openRelationModal(chip.dataset.relation, true);
      });
    });

    // Bind mob thumbnails
    modalBody.querySelectorAll('.mob-thumb[data-mobid]').forEach(thumb => {
      thumb.addEventListener('click', () => {
        const mob = MOBS.find(m => m.id === thumb.dataset.mobid);
        if (mob) { pushHistory(render); openMobModal(mob, true); }
      });
    });
  };

  if (!fromHistory) openModal(render);
  else render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOCATION MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openLocationModal(loc, fromHistory) {
  const render = () => {
    modalName.textContent = loc.name;
    modalCat.className = `cat-badge ${loc.dimension}`;
    modalCat.textContent = loc.dimension.toUpperCase();
    modalImg.classList.remove('item-focus');
    modalImg.innerHTML = `<div class="modal-entity-emoji">${loc.emoji}</div>`;

    // Structures â€” clickable if a matching STRUCTURES entry exists
    const structHtml = loc.structures.length > 0
      ? loc.structures.map(s => {
          const sLow = s.toLowerCase().replace(/\s*\([^)]*\)/g, '').trim();
          const found = STRUCTURES.find(st =>
            st.name.toLowerCase() === sLow ||
            sLow.includes(st.name.toLowerCase()) ||
            st.name.toLowerCase().includes(sLow)
          );
          return found
            ? `<span class="chip struct-chip clickable" data-structid="${found.id}">${found.emoji} ${s}</span>`
            : `<span class="chip clickable" data-relation="${s.replace(/"/g, '&quot;')}">${s}</span>`;
        }).join('')
      : '<span class="chip" style="color:var(--text-dim)">None</span>';

    // Mobs as clickable chips
    const mobsHtml = loc.mobs.length > 0
      ? loc.mobs.map(mid => {
          const mob = MOBS.find(m => m.id === mid);
          if (!mob) return '';
          return `<span class="chip mob-chip clickable" data-mobid="${mob.id}">${mob.emoji} ${mob.name}</span>`;
        }).join('')
      : '<span class="chip" style="color:var(--text-dim)">None</span>';

    // Resources (clickable if item exists)
    const resourcesHtml = loc.resources.length > 0
      ? loc.resources.map(r => {
          const rClean = r.replace(/\s*\([^)]*\)/g, '').trim();
          const item = ITEMS.find(i => i.name.toLowerCase() === rClean.toLowerCase());
          return item
            ? `<span class="chip resource-chip clickable" data-itemid="${item.id}">${item.emoji} ${r}</span>`
            : `<span class="chip resource-chip clickable" data-relation="${r.replace(/"/g, '&quot;')}">${r}</span>`;
        }).join('')
      : '<span class="chip" style="color:var(--text-dim)">None</span>';

    modalBody.innerHTML = `
      <div class="section-text" style="margin-bottom:12px">${loc.desc}</div>
      <div class="section-title">STRUCTURES</div>
      <div class="chip-list">${structHtml}</div>
      <div class="section-title">MOBS</div>
      <div class="chip-list" id="locMobChips">${mobsHtml}</div>
      <div class="section-title">RESOURCES</div>
      <div class="chip-list" id="locResourceChips">${resourcesHtml}</div>
    `;

    // Bind structure chips
    modalBody.querySelectorAll('[data-structid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const struct = STRUCTURES.find(s => s.id === chip.dataset.structid);
        if (struct) { pushHistory(render); openStructureModal(struct, true); }
      });
    });

    // Bind mob chips
    modalBody.querySelectorAll('[data-mobid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const mob = MOBS.find(m => m.id === chip.dataset.mobid);
        if (mob) { pushHistory(render); openMobModal(mob, true); }
      });
    });

    // Bind resource chips
    modalBody.querySelectorAll('[data-itemid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const item = ITEMS.find(i => i.id === chip.dataset.itemid);
        if (item) { pushHistory(render); openItemModal(item, true); }
      });
    });
    modalBody.querySelectorAll('[data-relation]').forEach(chip => {
      chip.addEventListener('click', () => {
        pushHistory(render);
        openRelationModal(chip.dataset.relation, true);
      });
    });
  };

  if (!fromHistory) openModal(render);
  else render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  STRUCTURE MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openStructureModal(struct, fromHistory) {
  const render = () => {
    modalName.textContent = struct.name;
    modalCat.className = 'cat-badge ' + struct.dimension;
    modalCat.textContent = struct.dimension.toUpperCase();
    const imgSrc = struct.img;
    modalImg.classList.remove('item-focus');
    modalImg.innerHTML = `<img src="${imgSrc}" alt="${struct.name}" loading="lazy" style="max-width:120px;max-height:120px;object-fit:contain;image-rendering:pixelated;" onerror="this.style.display='none';this.nextSibling.style.display='block'"><span style="display:none;font-size:80px;line-height:1">${struct.emoji}</span>`;

    const biomesHtml = struct.biomes.map(b => `<span class="chip">${b}</span>`).join('');

    const lootHtml = struct.loot.length > 0
      ? struct.loot.map((l, i) => {
          const idItem = struct.lootIds && struct.lootIds[i] ? ITEMS.find(it => it.id === struct.lootIds[i]) : null;
          const nameItem = ITEMS.find(it => it.name.toLowerCase() === l.toLowerCase());
          const item = idItem || nameItem;
          return item
            ? `<span class="chip clickable" data-itemid="${item.id}" title="View ${item.name}">ğŸ ${l}</span>`
            : `<span class="chip clickable" data-relation="${l.replace(/"/g, '&quot;')}">ğŸ ${l}</span>`;
        }).join('')
      : '<span class="chip" style="color:var(--text-dim)">No notable loot</span>';

    const mobsHtml = struct.mobs.length > 0
      ? struct.mobs.map(mid => {
          const mob = MOBS.find(m => m.id === mid);
          if (!mob) return `<span class="chip mob-chip clickable" data-relation="${mid.replace(/_/g,' ')}">${mid.replace(/_/g,' ')}</span>`;
          return `<span class="chip mob-chip clickable" data-mobid="${mob.id}">${mob.emoji} ${mob.name}</span>`;
        }).join('')
      : '<span class="chip" style="color:var(--text-dim)">No unique mobs</span>';

    modalBody.innerHTML = `
      <div style="display:flex;gap:8px;margin-bottom:14px;flex-wrap:wrap;align-items:center">
        <span class="rarity-badge rarity-${struct.rarity}">${struct.rarity.toUpperCase()}</span>
        <span class="location-dim-badge dim-${struct.dimension}">${struct.dimension.toUpperCase()}</span>
      </div>
      <div class="section-title">BIOMES</div>
      <div class="chip-list">${biomesHtml}</div>
      <div class="section-title">DESCRIPTION</div>
      <div class="section-text">${struct.desc}</div>
      <div class="section-title">MOBS FOUND HERE</div>
      <div class="chip-list" id="structMobChips">${mobsHtml}</div>
      <div class="section-title">LOOT</div>
      <div class="chip-list" id="structLootChips">${lootHtml}</div>
    `;

    modalBody.querySelectorAll('[data-mobid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const mob = MOBS.find(m => m.id === chip.dataset.mobid);
        if (mob) { pushHistory(render); openMobModal(mob, true); }
      });
    });
    modalBody.querySelectorAll('[data-itemid]').forEach(chip => {
      chip.addEventListener('click', () => {
        const item = ITEMS.find(i => i.id === chip.dataset.itemid);
        if (item) { pushHistory(render); openItemModal(item, true); }
      });
    });
    modalBody.querySelectorAll('[data-relation]').forEach(chip => {
      chip.addEventListener('click', () => {
        pushHistory(render);
        openRelationModal(chip.dataset.relation, true);
      });
    });
  };

  if (!fromHistory) openModal(render);
  else render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CONCEPT MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function openConceptModal(concept, fromHistory) {
  const render = () => {
    modalName.textContent = concept.name;
    modalCat.className = 'cat-badge';
    modalCat.style.cssText = 'color:var(--purple);border-color:var(--purple);background:rgba(156,39,176,0.15)';
    modalCat.textContent = 'CONCEPT';
    modalImg.classList.remove('item-focus');
    modalImg.innerHTML = `<div class="modal-entity-emoji">${concept.emoji}</div>`;
    modalBody.innerHTML = `
      <div class="section-title">WHAT IS THIS?</div>
      <div class="section-text">${concept.desc}</div>
    `;
  };

  if (!fromHistory) openModal(render);
  else render();
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  LOCATION THEME SWITCHING
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const DEFAULT_BG = userBgColor;
const DEFAULT_ACCENT = '#4caf50';
const DEFAULT_GRADIENT = 'radial-gradient(ellipse at top, #0a1a0a 0%, var(--bg-dark) 60%)';

function applyLocationTheme(loc) {
  const t = loc.theme;
  document.documentElement.style.setProperty('--bg-dark', t.bgColor);
  document.documentElement.style.setProperty('--accent', t.accentColor);
  document.documentElement.style.setProperty('--accent-dark', t.accentColor);
  document.documentElement.style.setProperty('--green', t.accentColor);
  document.documentElement.style.setProperty('--transition-speed', '0.6s');
  document.body.style.backgroundImage = t.bgGradient;

  activeLocationTheme = loc;

  const hud = document.getElementById('locationHud');
  document.getElementById('hudText').textContent = `ğŸ“ ${loc.name}`;
  hud.classList.add('visible');

  // Update tab active border
  document.querySelector('.tab-btn.active').style.color = t.accentColor;
  document.querySelector('.tab-btn.active').style.borderColor = t.accentColor;
}

function resetTheme() {
  document.documentElement.style.setProperty('--bg-dark', userBgColor);
  document.documentElement.style.setProperty('--accent', DEFAULT_ACCENT);
  document.documentElement.style.setProperty('--accent-dark', '#2e7d32');
  document.documentElement.style.setProperty('--green', DEFAULT_ACCENT);
  document.body.style.backgroundImage = '';
  activeLocationTheme = null;

  document.getElementById('locationHud').classList.remove('visible');
  document.querySelectorAll('.tab-btn').forEach(b => { b.style.color = ''; b.style.borderColor = ''; });
}

document.getElementById('locationHudExit').addEventListener('click', resetTheme);

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  COLOR CUSTOMIZER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const colorToggle = document.getElementById('colorToggle');
const colorPanel = document.getElementById('colorPanel');
const customColorPicker = document.getElementById('customColorPicker');
const swatchContainer = document.getElementById('swatchContainer');

colorToggle.addEventListener('click', () => colorPanel.classList.toggle('open'));

customColorPicker.value = userBgColor;
customColorPicker.addEventListener('input', e => {
  userBgColor = e.target.value;
  applyUserColor(userBgColor);
  localStorage.setItem('userBgColor', userBgColor);
  updateSwatchActive(userBgColor);
});

swatchContainer.querySelectorAll('.swatch').forEach(sw => {
  sw.addEventListener('click', () => {
    userBgColor = sw.dataset.color;
    applyUserColor(userBgColor);
    localStorage.setItem('userBgColor', userBgColor);
    customColorPicker.value = userBgColor;
    updateSwatchActive(userBgColor);
  });
});

function applyUserColor(color) {
  if (!activeLocationTheme) {
    document.documentElement.style.setProperty('--bg-dark', color);
  }
}

function updateSwatchActive(color) {
  swatchContainer.querySelectorAll('.swatch').forEach(sw => {
    sw.classList.toggle('active', sw.dataset.color === color);
  });
}

updateSwatchActive(userBgColor);
document.addEventListener('click', e => {
  if (!e.target.closest('#colorCustomizer')) colorPanel.classList.remove('open');
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  INIT
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
renderMobs();
renderItems();
renderLocations();
renderStructures();
updateStats();
</script>
</body>
</html>